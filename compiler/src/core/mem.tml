// TML Core Library - Memory Module
// Low-level memory allocation primitives
//
// All functions are lowlevel - implemented in runtime/mem.c

// ============ MEMORY ALLOCATION ============

// Allocate memory for N elements of size sizeof(i32)
// Returns opaque pointer to allocated memory
pub lowlevel func alloc(count: I64) -> *Unit

// Allocate memory with I32 size argument
pub lowlevel func alloc(count: I32) -> *Unit

// Free allocated memory
// ptr: Pointer previously returned by alloc()
pub lowlevel func dealloc(ptr: *Unit) -> Unit

// ============ MEMORY READ/WRITE ============

// Read i32 value from pointer
pub lowlevel func read_i32(ptr: *Unit) -> I32

// Write i32 value to pointer
pub lowlevel func write_i32(ptr: *Unit, value: I32) -> Unit

// ============ POINTER ARITHMETIC ============

// Calculate pointer offset
// Returns pointer + offset (in units of sizeof(i32))
pub lowlevel func ptr_offset(ptr: *Unit, offset: I64) -> *Unit

// Pointer offset with I32 offset
pub lowlevel func ptr_offset(ptr: *Unit, offset: I32) -> *Unit
