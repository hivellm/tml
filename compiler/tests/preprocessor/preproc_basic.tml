// Test basic conditional compilation
// Expected output: Platform-specific code and debug code

#if WINDOWS
func get_platform() -> Str {
    return "Windows"
}
#elif LINUX
func get_platform() -> Str {
    return "Linux"
}
#elif MACOS
func get_platform() -> Str {
    return "macOS"
}
#else
func get_platform() -> Str {
    return "Unknown"
}
#endif

#ifdef DEBUG
func is_debug() -> Bool {
    return true
}
#else
func is_debug() -> Bool {
    return false
}
#endif

#ifndef RELEASE
func not_release() -> Bool {
    return true
}
#endif

// Test nested conditionals
#if WINDOWS
    #ifdef X86_64
    func get_arch() -> Str {
        return "Windows x64"
    }
    #else
    func get_arch() -> Str {
        return "Windows x86"
    }
    #endif
#elif UNIX
    #ifdef ARM64
    func get_arch() -> Str {
        return "Unix ARM64"
    }
    #else
    func get_arch() -> Str {
        return "Unix x64"
    }
    #endif
#endif

// Test logical operators
#if WINDOWS || LINUX || MACOS
func is_desktop() -> Bool {
    return true
}
#endif

#if DEBUG && !RELEASE
func debug_only_feature() -> I32 {
    return 42
}
#endif

func main() -> I32 {
    print(get_platform())
    print("\n")

    if is_debug() {
        print("Debug mode\n")
    }

    if is_desktop() {
        print("Desktop platform\n")
    }

    return 0
}
