use test

// Tests for loop variable syntax: loop (var i: Type < limit)

@test
func test_basic_loop_var() -> I32 {
    let mut sum: I32 = 0
    loop (var i: I32 < 5) {
        sum = sum + i
        i = i + 1
    }
    // 0 + 1 + 2 + 3 + 4 = 10
    assert_eq(sum, 10, "sum of 0..5 should be 10")
    return 0
}

@test
func test_loop_var_i64() -> I32 {
    let mut sum: I64 = 0
    loop (var i: I64 < 10) {
        sum = sum + i
        i = i + 1
    }
    // 0 + 1 + ... + 9 = 45
    assert_eq(sum, 45, "sum of 0..10 should be 45")
    return 0
}

@test
func test_loop_var_with_expression_limit() -> I32 {
    let limit: I32 = 3
    let mut count: I32 = 0
    loop (var i: I32 < limit * 2) {
        count = count + 1
        i = i + 1
    }
    // limit * 2 = 6, so count = 6
    assert_eq(count, 6, "loop should run 6 times")
    return 0
}

@test
func test_nested_loop_var() -> I32 {
    let mut total: I32 = 0
    loop (var i: I32 < 3) {
        loop (var j: I32 < 3) {
            total = total + 1
            j = j + 1
        }
        i = i + 1
    }
    // 3 * 3 = 9
    assert_eq(total, 9, "3x3 nested loop should count to 9")
    return 0
}
