use test

// Test foreach over ranges
@test
func test_foreach_range() -> I32 {
    let mut sum: I32 = 0
    for i in 0 to 5 {
        sum = sum + i
    }
    // 0+1+2+3+4 = 10
    assert(sum == 10, "range 0 to 5 should sum to 10")
    return 0
}

@test
func test_foreach_range_inclusive() -> I32 {
    let mut sum: I32 = 0
    for i in 1 through 5 {
        sum = sum + i
    }
    // 1+2+3+4+5 = 15
    assert(sum == 15, "range 1 through 5 should sum to 15")
    return 0
}

@test
func test_foreach_range_with_break() -> I32 {
    let mut sum: I32 = 0
    for i in 0 to 10 {
        if i == 5 then break
        sum = sum + i
    }
    // 0+1+2+3+4 = 10
    assert(sum == 10, "range with break at 5 should sum to 10")
    return 0
}

@test
func test_foreach_range_with_continue() -> I32 {
    let mut sum: I32 = 0
    for i in 0 to 10 {
        if i % 2 == 0 then continue
        sum = sum + i
    }
    // 1+3+5+7+9 = 25
    assert(sum == 25, "range with continue (odds only) should sum to 25")
    return 0
}

@test
func test_foreach_nested() -> I32 {
    let mut sum: I32 = 0
    for i in 0 to 3 {
        for j in 0 to 3 {
            sum = sum + i * j
        }
    }
    // (0*0 + 0*1 + 0*2) + (1*0 + 1*1 + 1*2) + (2*0 + 2*1 + 2*2) = 0 + 3 + 6 = 9
    assert(sum == 9, "nested loops should sum to 9")
    return 0
}

@test
func test_foreach_variable_bounds() -> I32 {
    let start: I32 = 2
    let end: I32 = 7
    let mut sum: I32 = 0
    for i in start to end {
        sum = sum + i
    }
    // 2+3+4+5+6 = 20
    assert(sum == 20, "variable bounds should sum to 20")
    return 0
}