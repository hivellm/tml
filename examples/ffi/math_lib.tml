// Example: TML Math Library for C FFI
// Build: tml build examples/ffi/math_lib.tml --crate-type lib --emit-header

// Basic arithmetic operations
pub func add(a: I32, b: I32) -> I32 {
    return a + b
}

pub func subtract(a: I32, b: I32) -> I32 {
    return a - b
}

pub func multiply(x: I32, y: I32) -> I32 {
    return x * y
}

pub func divide(x: I32, y: I32) -> I32 {
    let result: I32 = if y == 0 then 0 else x / y
    return result
}

// Mathematical functions
pub func factorial(n: I32) -> I32 {
    let result: I32 = if n <= 1 then 1 else n * factorial(n - 1)
    return result
}

pub func power(base: I32, exp: I32) -> I32 {
    if exp == 0 then {
        return 1
    }
    if exp < 0 then {
        return 0
    }

    let mut result: I32 = 1
    for i in 0 to exp {
        result = result * base
    }
    return result
}

pub func abs(x: I32) -> I32 {
    let result: I32 = if x < 0 then -x else x
    return result
}

pub func max(a: I32, b: I32) -> I32 {
    let result: I32 = if a > b then a else b
    return result
}

pub func min(a: I32, b: I32) -> I32 {
    let result: I32 = if a < b then a else b
    return result
}
