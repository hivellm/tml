// Tests for os module - basic platform info functions
use test
use std::os::{
    arch, platform, os_type, hostname,
    homedir, tmpdir, cpu_count,
    pid, env_get, env_set
}

// =============================================================================
// arch / platform / os_type
// =============================================================================

@test
func test_os_arch() -> I32 {
    let a: Str = arch()
    assert(a.len() > 0, "arch should return non-empty string")
    return 0
}

@test
func test_os_platform() -> I32 {
    let p: Str = platform()
    assert(p.len() > 0, "platform should return non-empty string")
    return 0
}

@test
func test_os_type() -> I32 {
    let t: Str = os_type()
    assert(t.len() > 0, "os_type should return non-empty string")
    return 0
}

// =============================================================================
// hostname / homedir / tmpdir
// =============================================================================

@test
func test_os_hostname() -> I32 {
    let h: Str = hostname()
    assert(h.len() > 0, "hostname should return non-empty string")
    return 0
}

@test
func test_os_homedir() -> I32 {
    let h: Str = homedir()
    assert(h.len() > 0, "homedir should return non-empty string")
    return 0
}

@test
func test_os_tmpdir() -> I32 {
    let t: Str = tmpdir()
    assert(t.len() > 0, "tmpdir should return non-empty string")
    return 0
}

// =============================================================================
// cpu_count / pid
// =============================================================================

@test
func test_os_cpu_count() -> I32 {
    let count: I64 = cpu_count()
    assert(count > 0, "cpu_count should be positive")
    return 0
}

@test
func test_os_pid() -> I32 {
    let p: I64 = pid()
    assert(p > 0, "pid should be positive")
    return 0
}

// =============================================================================
// env_get / env_set
// =============================================================================

@test
func test_os_env_get_path() -> I32 {
    // PATH should exist on all platforms
    let val: Maybe[Str] = env_get("PATH")
    assert(val.is_just(), "env_get PATH should return Just")
    return 0
}

@test
func test_os_env_set() -> I32 {
    // Just verify env_set doesn't crash
    env_set("TML_TEST_VAR_XYZ", "value")
    assert(true, "env_set should not crash")
    return 0
}
