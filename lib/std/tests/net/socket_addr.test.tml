// Tests for std::net::socket - SocketAddrV4 and SocketAddr
use test
use std::net::socket::{SocketAddrV4, SocketAddr}
use std::net::ip::{Ipv4Addr}

@test
func test_socket_addr_v4_new() -> I32 {
    let addr: SocketAddrV4 = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 8080 as U16)
    assert_eq(addr.port(), 8080 as U16, "port should be 8080")
    assert(addr.ip().is_loopback(), "ip should be loopback")
    return 0
}

@test
func test_socket_addr_v4_set_port() -> I32 {
    var addr: SocketAddrV4 = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 80 as U16)
    addr.set_port(443 as U16)
    assert_eq(addr.port(), 443 as U16, "port should be updated to 443")
    return 0
}

@test
func test_socket_addr_v4_set_ip() -> I32 {
    var addr: SocketAddrV4 = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 80 as U16)
    addr.set_ip(Ipv4Addr::UNSPECIFIED())
    assert(addr.ip().is_unspecified(), "ip should be updated to unspecified")
    return 0
}

// BLOCKED: All SocketAddrV4/SocketAddr trait impls (eq, cmp, partial_cmp, duplicate, hash, fmt)
// — "Unknown method" at codegen for behavior dispatch on struct
// BLOCKED: SocketAddr::from_v4() returns () — can't construct SocketAddr
