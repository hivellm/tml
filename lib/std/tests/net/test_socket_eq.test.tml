use test
use std::net::socket::{SocketAddrV4, SocketAddr}
use std::net::ip::Ipv4Addr

@test
func test_socket_addr_eq() -> I32 {
    let a = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 80 as U16)
    let b = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 80 as U16)
    assert(a.eq(ref b), "same addr should be equal")
    return 0
}

@test
func test_socket_addr_eq_op() -> I32 {
    let a = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 80 as U16)
    let b = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 80 as U16)
    assert(a == b, "same addr should be == equal")
    return 0
}

@test
func test_socket_addr_duplicate() -> I32 {
    let a = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 8080 as U16)
    let b = a.duplicate()
    assert(b.port() == 8080 as U16, "duplicate should have same port")
    return 0
}

@test
func test_socket_addr_cmp() -> I32 {
    let a = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 80 as U16)
    let b = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 443 as U16)
    let ord = a.cmp(ref b)
    return 0
}

@test
func test_socket_addr_from_v4() -> I32 {
    let v4 = SocketAddrV4::new(Ipv4Addr::LOCALHOST(), 3000 as U16)
    let addr = SocketAddr::V4(v4)
    assert(addr.port() == 3000 as U16, "SocketAddr port should be 3000")
    return 0
}
