// Tests for std::http::request
use test::{assert, assert_eq}
use std::http::request::Request
use std::http::method::Method
use std::http::version::HttpVersion

@test
func test_request_get_constructor() -> I32 {
    let req = Request::get("https://api.example.com/users")
    assert_eq(req.method().to_string(), "GET", "method is GET")
    assert_eq(req.url(), "https://api.example.com/users", "url preserved")
    assert_eq(req.body_data(), "", "no body")
    req.destroy()
    return 0
}

@test
func test_request_post_constructor() -> I32 {
    let req = Request::post("https://api.example.com/users")
    assert_eq(req.method().to_string(), "POST", "method is POST")
    req.destroy()
    return 0
}

@test
func test_request_all_method_constructors() -> I32 {
    let r1 = Request::put("http://x.com")
    assert_eq(r1.method().to_string(), "PUT", "PUT")
    r1.destroy()

    let r2 = Request::delete("http://x.com")
    assert_eq(r2.method().to_string(), "DELETE", "DELETE")
    r2.destroy()

    let r3 = Request::patch("http://x.com")
    assert_eq(r3.method().to_string(), "PATCH", "PATCH")
    r3.destroy()

    let r4 = Request::head("http://x.com")
    assert_eq(r4.method().to_string(), "HEAD", "HEAD")
    r4.destroy()

    let r5 = Request::options("http://x.com")
    assert_eq(r5.method().to_string(), "OPTIONS", "OPTIONS")
    r5.destroy()
    return 0
}
