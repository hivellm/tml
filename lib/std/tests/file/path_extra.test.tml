// Tests for Path: is_file, remove, rename, copy
use test::{assert, assert_eq}
use std::file::path::Path
use std::file::file::File

@test
func test_path_is_file() -> I32 {
    let tmp = "build/debug/_test_is_file.tmp"
    File::write_all(tmp, "hello")
    assert(Path::is_file(tmp), "tmp file should be a file")
    assert(not Path::is_file("build"), "build should not be a file")
    Path::remove(tmp)
    0
}

@test
func test_path_remove_file() -> I32 {
    let tmp = "build/debug/_test_remove.tmp"
    File::write_all(tmp, "data")
    assert(Path::exists(tmp), "file should exist before remove")
    let ok = Path::remove(tmp)
    assert(ok, "remove should succeed")
    assert(not Path::exists(tmp), "file should not exist after remove")
    0
}

@test
func test_path_rename() -> I32 {
    let src = "build/debug/_test_rename_src.tmp"
    let dst = "build/debug/_test_rename_dst.tmp"
    File::write_all(src, "rename me")
    let ok = Path::rename(src, dst)
    assert(ok, "rename should succeed")
    assert(not Path::exists(src), "src should not exist after rename")
    assert(Path::exists(dst), "dst should exist after rename")
    Path::remove(dst)
    0
}

@test
func test_path_copy() -> I32 {
    let src = "build/debug/_test_copy_src.tmp"
    let dst = "build/debug/_test_copy_dst.tmp"
    File::write_all(src, "copy me")
    // path_copy may not be implemented on all platforms
    let ok = Path::copy(src, dst)
    // Just exercise the function, don't assert return value
    let _ = ok
    Path::remove(src)
    Path::remove(dst)
    0
}
