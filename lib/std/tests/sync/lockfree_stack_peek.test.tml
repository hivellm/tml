// Tests for LockFreeStack::peek
use test
use std::sync::stack::{LockFreeStack}

@test
func test_stack_peek_empty() -> I32 {
    let s: LockFreeStack[I32] = LockFreeStack::new()
    let r: Maybe[ref I32] = s.peek()
    assert(r.is_nothing(), "peek on empty stack is Nothing")
    return 0
}

@test
func test_stack_peek_nonempty() -> I32 {
    var s: LockFreeStack[I32] = LockFreeStack::new()
    s.push(42 as I32)
    s.push(99 as I32)
    let r: Maybe[ref I32] = s.peek()
    assert(r.is_just(), "peek on nonempty stack is Just")
    return 0
}
