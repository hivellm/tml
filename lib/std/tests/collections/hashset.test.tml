// Tests for std::collections::class_collections - HashSet
use test
use std::collections::class_collections::{HashSet}

@test
func test_hashset_create() -> I32 {
    let set: HashSet[I32] = HashSet::create()
    assert_eq(set.count(), 0 as I64, "new HashSet is empty")
    assert(set.is_empty(), "new HashSet is_empty")
    return 0
}

@test
func test_hashset_add_unique() -> I32 {
    var set: HashSet[I32] = HashSet::create()
    let added1: Bool = set.add(10 as I32)
    assert(added1, "first add should return true")
    let added2: Bool = set.add(10 as I32)
    assert(not added2, "duplicate add should return false")
    assert_eq(set.count(), 1 as I64, "count should be 1 after duplicate")
    return 0
}

@test
func test_hashset_contains_remove() -> I32 {
    var set: HashSet[I32] = HashSet::create()
    set.add(1 as I32)
    set.add(2 as I32)
    set.add(3 as I32)
    assert(set.contains(2 as I32), "contains existing element")
    assert(not set.contains(99 as I32), "not contains missing element")
    let removed: Bool = set.remove(2 as I32)
    assert(removed, "remove returns true")
    assert(not set.contains(2 as I32), "removed element not found")
    assert_eq(set.count(), 2 as I64, "count after remove")
    return 0
}
