// Tests targeting uncovered class_collections functions
use test
use std::collections::class_collections::{ArrayList, HashSet, Queue, Stack}

// =============================================================================
// ArrayList uncovered methods
// =============================================================================

@test
func test_arraylist_with_capacity() -> I32 {
    let list: ArrayList[I32] = ArrayList::with_capacity(32 as I64)
    assert(list.is_empty(), "with_capacity creates empty list")
    return 0
}

@test
func test_arraylist_insert() -> I32 {
    var list: ArrayList[I32] = ArrayList::create()
    list.add(10 as I32)
    list.add(30 as I32)
    list.insert(1 as I64, 20 as I32)
    assert_eq(list.count(), 3 as I64, "insert increases count")
    return 0
}

@test
func test_arraylist_reverse() -> I32 {
    var list: ArrayList[I32] = ArrayList::create()
    list.add(1 as I32)
    list.add(2 as I32)
    list.add(3 as I32)
    list.reverse()
    assert_eq(list.get(0 as I64), 3 as I32, "reverse first element")
    assert_eq(list.get(2 as I64), 1 as I32, "reverse last element")
    return 0
}

// =============================================================================
// HashSet uncovered methods
// =============================================================================

@test
func test_hashset_with_capacity() -> I32 {
    let s: HashSet[I64] = HashSet::with_capacity(64 as I64)
    assert(s.is_empty(), "with_capacity creates empty set")
    return 0
}

@test
func test_hashset_clear() -> I32 {
    var s: HashSet[I64] = HashSet::create()
    s.add(1 as I64)
    s.add(2 as I64)
    assert_eq(s.count(), 2 as I64, "count after adds")
    s.clear()
    assert(s.is_empty(), "clear empties set")
    return 0
}

// =============================================================================
// Queue uncovered methods
// =============================================================================

@test
func test_queue_with_capacity() -> I32 {
    let q: Queue[I32] = Queue::with_capacity(32 as I64)
    assert(q.is_empty(), "with_capacity creates empty queue")
    return 0
}

@test
func test_queue_add() -> I32 {
    var q: Queue[I32] = Queue::create()
    q.add(10 as I32)
    q.add(20 as I32)
    assert_eq(q.count(), 2 as I64, "add adds to queue")
    return 0
}

@test
func test_queue_clear() -> I32 {
    var q: Queue[I32] = Queue::create()
    q.add(1 as I32)
    q.add(2 as I32)
    q.clear()
    assert(q.is_empty(), "clear empties queue")
    return 0
}

// =============================================================================
// Stack uncovered methods
// =============================================================================

@test
func test_stack_with_capacity() -> I32 {
    let s: Stack[I32] = Stack::with_capacity(32 as I64)
    assert(s.is_empty(), "with_capacity creates empty stack")
    return 0
}

@test
func test_stack_add() -> I32 {
    var s: Stack[I32] = Stack::create()
    s.add(10 as I32)
    s.add(20 as I32)
    assert_eq(s.count(), 2 as I64, "add adds to stack")
    return 0
}

@test
func test_stack_clear() -> I32 {
    var s: Stack[I32] = Stack::create()
    s.add(1 as I32)
    s.add(2 as I32)
    s.clear()
    assert(s.is_empty(), "clear empties stack")
    return 0
}

@test
func test_stack_remove() -> I32 {
    var s: Stack[I64] = Stack::create()
    s.add(10 as I64)
    s.add(20 as I64)
    s.add(30 as I64)
    let removed: Bool = s.remove(20 as I64)
    assert(removed, "remove should find and remove element")
    assert_eq(s.count(), 2 as I64, "count after remove")
    return 0
}

@test
func test_stack_contains() -> I32 {
    var s: Stack[I64] = Stack::create()
    s.add(10 as I64)
    s.add(20 as I64)
    assert(s.contains(10 as I64), "contains should find element")
    assert(not s.contains(99 as I64), "contains should not find missing element")
    return 0
}

@test
func test_queue_remove() -> I32 {
    var q: Queue[I64] = Queue::create()
    q.add(10 as I64)
    q.add(20 as I64)
    q.add(30 as I64)
    let removed: Bool = q.remove(20 as I64)
    assert(removed, "remove should find and remove element")
    return 0
}

@test
func test_queue_contains() -> I32 {
    var q: Queue[I64] = Queue::create()
    q.add(10 as I64)
    q.add(20 as I64)
    assert(q.contains(10 as I64), "contains should find element")
    assert(not q.contains(99 as I64), "contains should not find missing element")
    return 0
}
