// Tests for exception subclasses - InvalidOperation, NotSupported, NotImplemented
use test

class MockInvalidOpException {
    message: Str

    static func create(message: Str) -> MockInvalidOpException {
        return MockInvalidOpException { message: message }
    }

    func get_message(this) -> Str { return this.message }
    func get_type(this) -> Str { return "InvalidOperationException" }
    func to_string(this) -> Str { return "InvalidOperationException: " + this.message }
}

class MockNotSupportedException {
    message: Str

    static func create() -> MockNotSupportedException {
        return MockNotSupportedException { message: "Operation is not supported" }
    }

    static func with_message(message: Str) -> MockNotSupportedException {
        return MockNotSupportedException { message: message }
    }

    func get_message(this) -> Str { return this.message }
    func get_type(this) -> Str { return "NotSupportedException" }
    func to_string(this) -> Str { return "NotSupportedException: " + this.message }
}

class MockNotImplException {
    message: Str

    static func create() -> MockNotImplException {
        return MockNotImplException { message: "Method not implemented" }
    }

    static func with_message(message: Str) -> MockNotImplException {
        return MockNotImplException { message: message }
    }

    func get_message(this) -> Str { return this.message }
    func get_type(this) -> Str { return "NotImplementedException" }
    func to_string(this) -> Str { return "NotImplementedException: " + this.message }
}

@test
func test_invalid_op_exception() -> I32 {
    let e: MockInvalidOpException = MockInvalidOpException::create("Cannot send while disconnected")
    assert_eq(e.get_type(), "InvalidOperationException", "type")
    assert_eq(e.get_message(), "Cannot send while disconnected", "message")
    assert_eq(e.to_string(), "InvalidOperationException: Cannot send while disconnected", "to_string")
    return 0
}

@test
func test_not_supported_default() -> I32 {
    let e: MockNotSupportedException = MockNotSupportedException::create()
    assert_eq(e.get_type(), "NotSupportedException", "type")
    assert_eq(e.get_message(), "Operation is not supported", "default message")
    return 0
}

@test
func test_not_supported_with_message() -> I32 {
    let e: MockNotSupportedException = MockNotSupportedException::with_message("Read-only collection")
    assert_eq(e.get_message(), "Read-only collection", "custom message")
    assert_eq(e.to_string(), "NotSupportedException: Read-only collection", "to_string")
    return 0
}

@test
func test_not_implemented_default() -> I32 {
    let e: MockNotImplException = MockNotImplException::create()
    assert_eq(e.get_type(), "NotImplementedException", "type")
    assert_eq(e.get_message(), "Method not implemented", "default message")
    return 0
}

@test
func test_not_implemented_with_message() -> I32 {
    let e: MockNotImplException = MockNotImplException::with_message("TODO: implement serialize")
    assert_eq(e.get_message(), "TODO: implement serialize", "custom message")
    return 0
}
