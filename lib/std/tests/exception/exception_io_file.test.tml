// Tests for IO/File exception classes and arithmetic/format/cast/timeout
use test

class MockIOException {
    message: Str

    static func create(message: Str) -> MockIOException {
        return MockIOException { message: message }
    }

    func get_message(this) -> Str { return this.message }
    func get_type(this) -> Str { return "IOException" }
    func to_string(this) -> Str { return "IOException: " + this.message }
}

class MockFileNotFoundException {
    message: Str
    file_path: Str

    static func create(file_path: Str) -> MockFileNotFoundException {
        return MockFileNotFoundException {
            message: "File not found: " + file_path,
            file_path: file_path
        }
    }

    func get_message(this) -> Str { return this.message }
    func get_file_path(this) -> Str { return this.file_path }
    func get_type(this) -> Str { return "FileNotFoundException" }
    func to_string(this) -> Str { return "FileNotFoundException: " + this.message }
}

class MockArithmeticException {
    message: Str

    static func create(message: Str) -> MockArithmeticException {
        return MockArithmeticException { message: message }
    }

    static func overflow() -> MockArithmeticException {
        return MockArithmeticException { message: "Arithmetic overflow" }
    }

    static func divide_by_zero() -> MockArithmeticException {
        return MockArithmeticException { message: "Division by zero" }
    }

    func get_message(this) -> Str { return this.message }
    func get_type(this) -> Str { return "ArithmeticException" }
}

class MockTimeoutException {
    message: Str

    static func create() -> MockTimeoutException {
        return MockTimeoutException { message: "Operation timed out" }
    }

    static func with_message(message: Str) -> MockTimeoutException {
        return MockTimeoutException { message: message }
    }

    func get_message(this) -> Str { return this.message }
    func get_type(this) -> Str { return "TimeoutException" }
}

@test
func test_io_exception() -> I32 {
    let e: MockIOException = MockIOException::create("disk full")
    assert_eq(e.get_type(), "IOException", "type")
    assert_eq(e.get_message(), "disk full", "message")
    assert_eq(e.to_string(), "IOException: disk full", "to_string")
    return 0
}

@test
func test_file_not_found() -> I32 {
    let e: MockFileNotFoundException = MockFileNotFoundException::create("/etc/config.json")
    assert_eq(e.get_type(), "FileNotFoundException", "type")
    assert_eq(e.get_file_path(), "/etc/config.json", "file path")
    assert_eq(e.get_message(), "File not found: /etc/config.json", "message format")
    return 0
}

@test
func test_arithmetic_overflow() -> I32 {
    let e: MockArithmeticException = MockArithmeticException::overflow()
    assert_eq(e.get_type(), "ArithmeticException", "type")
    assert_eq(e.get_message(), "Arithmetic overflow", "overflow message")
    return 0
}

@test
func test_arithmetic_divide_by_zero() -> I32 {
    let e: MockArithmeticException = MockArithmeticException::divide_by_zero()
    assert_eq(e.get_message(), "Division by zero", "divide by zero message")
    return 0
}

@test
func test_timeout_default() -> I32 {
    let e: MockTimeoutException = MockTimeoutException::create()
    assert_eq(e.get_type(), "TimeoutException", "type")
    assert_eq(e.get_message(), "Operation timed out", "default message")
    return 0
}

@test
func test_timeout_with_message() -> I32 {
    let e: MockTimeoutException = MockTimeoutException::with_message("Connection timed out after 30s")
    assert_eq(e.get_message(), "Connection timed out after 30s", "custom message")
    return 0
}
