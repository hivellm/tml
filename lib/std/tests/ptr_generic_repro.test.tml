// Minimal repro: Generic struct with Ptr[T] as type argument
use test::{assert, assert_eq}

// Simple generic wrapper
type Wrapper[T] {
    value: T,
}

impl[T] Wrapper[T] {
    func new(value: T) -> Wrapper[T] {
        return Wrapper { value: value }
    }
}

@test
func test_wrapper_i32() -> I32 {
    // This should work - simple type argument
    let w: Wrapper[I32] = Wrapper::new[I32](42)
    return 0
}

@test
func test_wrapper_ptr_i32() -> I32 {
    // This is the problematic case - Ptr as type argument
    var x: I32 = 100
    let p: Ptr[I32] = ref x as Ptr[I32]
    let w: Wrapper[Ptr[I32]] = Wrapper::new[Ptr[I32]](p)
    return 0
}
