// Tests for std::json::builder - Builder fluent API
use test
use std::json::builder::{Builder}

@test
func test_builder_empty_object() -> I32 {
    let b: Builder = Builder::new()
    b.obj()
    b.end_obj()
    let result: Str = b.build()
    assert_eq(result, "{}", "empty object")
    b.drop()
    return 0
}

@test
func test_builder_simple_kv() -> I32 {
    let b: Builder = Builder::new()
    b.obj()
    b.ks("name", "test")
    b.end_obj()
    let result: Str = b.build()
    assert_eq(result, "{\"name\":\"test\"}", "simple key-value")
    b.drop()
    return 0
}

@test
func test_builder_multiple_types() -> I32 {
    let b: Builder = Builder::new()
    b.obj()
    b.ks("str", "hello")
    b.kn("num", 42 as I64)
    b.kb("flag", true)
    b.end_obj()
    let result: Str = b.build()
    assert_eq(result, "{\"str\":\"hello\",\"num\":42,\"flag\":true}", "multiple types")
    b.drop()
    return 0
}
