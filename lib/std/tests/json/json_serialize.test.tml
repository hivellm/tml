// Tests for json/serialize â€” to_json and from_json for primitive types
use test
use std::json::{Json, parse}
use std::json::Json

@test
func test_bool_to_json_true() -> I32 {
    let j = true.to_json()
    let s = j.to_string()
    assert_eq(s, "true", "true.to_json() should produce true")
    j.drop()
    0
}

@test
func test_bool_to_json_false() -> I32 {
    let j = false.to_json()
    let s = j.to_string()
    assert_eq(s, "false", "false.to_json() should produce false")
    j.drop()
    0
}

@test
func test_i32_to_json() -> I32 {
    let j = 42.to_json()
    let s = j.to_string()
    assert_eq(s, "42", "42.to_json() should produce 42")
    j.drop()
    0
}

@test
func test_i64_to_json() -> I32 {
    let val: I64 = 100
    let j = val.to_json()
    let s = j.to_string()
    assert_eq(s, "100", "100i64.to_json() should produce 100")
    j.drop()
    0
}

@test
func test_f64_to_json() -> I32 {
    let val: F64 = 3.14
    let j = val.to_json()
    let s = j.to_string()
    assert(s.len() > 0, "f64.to_json() should produce output")
    j.drop()
    0
}

@test
func test_str_to_json() -> I32 {
    let j = "hello".to_json()
    let s = j.to_string()
    assert(s.contains("hello"), "str.to_json() should contain the string")
    j.drop()
    0
}

@test
func test_i8_to_json() -> I32 {
    let val: I8 = 42 as I8
    let j = val.to_json()
    let s = j.to_string()
    assert_eq(s, "42", "I8 42.to_json()")
    0
}

@test
func test_i16_to_json() -> I32 {
    let val: I16 = 1000 as I16
    let j = val.to_json()
    let s = j.to_string()
    assert_eq(s, "1000", "I16 1000.to_json()")
    0
}

@test
func test_u8_to_json() -> I32 {
    let val: U8 = 255 as U8
    let j = val.to_json()
    let s = j.to_string()
    assert_eq(s, "255", "U8 255.to_json()")
    0
}

@test
func test_u16_to_json() -> I32 {
    let val: U16 = 60000 as U16
    let j = val.to_json()
    let s = j.to_string()
    assert_eq(s, "60000", "U16 60000.to_json()")
    0
}

@test
func test_u32_to_json() -> I32 {
    let val: U32 = 100000 as U32
    let j = val.to_json()
    let s = j.to_string()
    assert_eq(s, "100000", "U32 100000.to_json()")
    0
}

@test
func test_u64_to_json() -> I32 {
    let val: U64 = 999 as U64
    let j = val.to_json()
    let s = j.to_string()
    assert_eq(s, "999", "U64 999.to_json()")
    0
}

@test
func test_f32_to_json() -> I32 {
    let val: F32 = 1.5 as F32
    let j = val.to_json()
    let s = j.to_string()
    assert(s.len() > 0, "F32 to_json should produce output")
    0
}
