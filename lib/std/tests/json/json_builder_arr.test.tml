// Tests for std::json::builder - Builder array and nested
use test
use std::json::builder::{Builder}

@test
func test_builder_empty_array() -> I32 {
    let b: Builder = Builder::new()
    b.arr()
    b.end_arr()
    let result: Str = b.build()
    assert_eq(result, "[]", "empty array")
    b.drop()
    return 0
}

@test
func test_builder_array_values() -> I32 {
    let b: Builder = Builder::new()
    b.arr()
    b.n(1 as I64)
    b.n(2 as I64)
    b.n(3 as I64)
    b.end_arr()
    let result: Str = b.build()
    assert_eq(result, "[1,2,3]", "array with values")
    b.drop()
    return 0
}

@test
func test_builder_null_and_bool() -> I32 {
    let b: Builder = Builder::new()
    b.obj()
    b.knil("empty")
    b.kb("active", false)
    b.end_obj()
    let result: Str = b.build()
    assert_eq(result, "{\"empty\":null,\"active\":false}", "null and bool")
    b.drop()
    return 0
}
