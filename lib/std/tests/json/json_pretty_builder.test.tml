// Tests for std::json::builder - PrettyBuilder
use test
use std::json::builder::{PrettyBuilder, pretty_object}

@test
func test_pretty_builder_new() -> I32 {
    let pb: PrettyBuilder = PrettyBuilder::new()
    assert_eq(pb.len(), 0 as I64, "new PrettyBuilder is empty")
    pb.drop()
    return 0
}

@test
func test_pretty_object_convenience() -> I32 {
    let pb: PrettyBuilder = pretty_object()
    pb.kn("count", 42 as I64)
    pb.end_obj()
    let result: Str = pb.build()
    assert(result.len() > 0, "pretty object should produce output")
    pb.drop()
    return 0
}

@test
func test_pretty_builder_with_indent() -> I32 {
    let pb: PrettyBuilder = PrettyBuilder::with_indent("    ")
    pb.obj()
    pb.ks("key", "val")
    pb.end_obj()
    let result: Str = pb.build()
    assert(result.len() > 0, "with_indent should produce output")
    pb.drop()
    return 0
}
