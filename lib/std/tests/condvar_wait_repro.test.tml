// Minimal repro: Condvar.wait() with generic MutexGuard
use test::{assert, assert_eq}
use std::sync::{Mutex, MutexGuard, Condvar}

@test
func test_condvar_wait_basic() -> I32 {
    let mutex: Mutex[I32] = Mutex::new(42)
    let condvar: Condvar = Condvar::new()

    // This should work - wait takes MutexGuard[T] and returns MutexGuard[T]
    var guard: MutexGuard[I32] = mutex.lock()
    // Use wait_timeout_ms to test Condvar functionality
    // It should timeout since no one is signaling
    let result: (MutexGuard[I32], Bool) = condvar.wait_timeout_ms(guard, 100)
    guard = result.0
    let timed_out: Bool = result.1
    assert(timed_out)  // Should have timed out

    return 0
}
