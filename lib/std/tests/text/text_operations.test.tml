// Tests for std::text::Text - substring, replace, repeat, reverse, pad
use test
use std::text::Text

@test
func test_text_substring() {
    let t: Text = Text::from("hello world")
    let sub: Text = t.substring(0, 5)
    assert_eq(sub.as_str(), "hello", "substring 0..5 should be 'hello'")
    sub.drop()
    t.drop()
}

@test
func test_text_repeat() {
    let t: Text = Text::from("ab")
    let rep: Text = t.repeat(3)
    assert_eq(rep.as_str(), "ababab", "repeat 3 should be 'ababab'")
    rep.drop()
    t.drop()
}

@test
func test_text_replace() {
    let t: Text = Text::from("hello world")
    let r: Text = t.replace("world", "TML")
    assert_eq(r.as_str(), "hello TML", "replace should work")
    r.drop()
    t.drop()
}

@test
func test_text_replace_all() {
    let t: Text = Text::from("aabaa")
    let r: Text = t.replace_all("a", "x")
    assert_eq(r.as_str(), "xxbxx", "replace_all should replace all occurrences")
    r.drop()
    t.drop()
}

@test
func test_text_reverse() {
    let t: Text = Text::from("abc")
    let r: Text = t.reverse()
    assert_eq(r.as_str(), "cba", "reverse should reverse")
    r.drop()
    t.drop()
}
