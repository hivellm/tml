// TML Backtrace Library
// Runtime stack trace capture and symbol resolution for debugging
//
// This module provides a complete backtrace API inspired by Rust's backtrace-rs:
// - backtrace: Stack trace capture and formatting
// - frame: Stack frame type with symbol information
// - symbol: Resolved symbol information (name, file, line, address)
//
// ## Usage
//
// ```tml
// use backtrace::Backtrace
//
// func example() {
//     let mut bt = Backtrace::capture()
//     bt.resolve()
//     print(bt.to_string())
// }
// ```
//
// ## Accessing Individual Frames
//
// ```tml
// use backtrace::{Backtrace, BacktraceFrame}
//
// let bt = Backtrace::capture()
// let count = bt.frame_count()
// for i in 0 to count {
//     let frame = bt.frame(i)
//     // process frame...
// }
// ```
//
// ## Platform Support
//
// ### Windows
// - Capture: RtlCaptureStackBackTrace (kernel32)
// - Resolution: DbgHelp (SymFromAddr, SymGetLineFromAddr64)
// - Symbols: Requires PDB files or DWARF debug info
// - Initialization: SymInitialize called automatically on first capture
// - Thread safety: Symbol operations protected by critical section
//
// ### Linux/macOS (planned)
// - Capture: backtrace() from execinfo.h
// - Resolution: dladdr for basic symbols, libbacktrace for full info
// - Symbols: DWARF debug info (.debug_info sections)
//
// ## Symbol Resolution Notes
//
// - Debug builds (-g): Full symbol names, file paths, and line numbers
// - Release builds: Function names only (if not stripped)
// - Inline functions: May show multiple symbols per frame address
// - Optimized code: Line numbers may be approximate due to instruction reordering
//
// ## Performance Characteristics
//
// - Capture: ~1-5 microseconds per frame (Windows)
// - Resolution: ~10-50 microseconds per frame (with symbols loaded)
// - Memory: ~64 bytes per frame + symbol string storage
//
// ## Integration
//
// Backtrace is automatically captured on:
// - panic() calls (when --backtrace flag is used)
// - assert_eq() failures (when --backtrace flag is used)

pub mod backtrace   // Main Backtrace type and capture functions
pub mod frame       // BacktraceFrame type
pub mod symbol      // BacktraceSymbol type

// Re-export main types at module level
pub use backtrace::Backtrace
pub use backtrace::BacktraceStatus
pub use backtrace::PrintFmt
pub use frame::BacktraceFrame
pub use symbol::BacktraceSymbol
pub use symbol::SymbolName

// Re-export convenience functions
pub use backtrace::print_backtrace
pub use backtrace::capture_backtrace
pub use backtrace::trace_frames
pub use backtrace::resolve_frame
pub use backtrace::clear_symbol_cache
