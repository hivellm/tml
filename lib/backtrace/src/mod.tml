//! Runtime Stack Trace Capture and Symbol Resolution
//!
//! This library provides a complete backtrace API for capturing and analyzing
//! stack traces at runtime, inspired by Rust's `backtrace-rs` library.
//!
//! # Core Types
//!
//! - [`Backtrace`] — Complete stack trace with frame information
//! - [`BacktraceFrame`] — Single stack frame with instruction pointer
//! - [`BacktraceSymbol`] — Resolved symbol information (function name, file, line)
//!
//! # Basic Usage
//!
//! ```tml
//! use backtrace::Backtrace
//!
//! func example() {
//!     let mut bt = Backtrace::capture()
//!     bt.resolve()
//!     print(bt.to_string())
//! }
//! ```
//!
//! # Accessing Individual Frames
//!
//! ```tml
//! use backtrace::{Backtrace, BacktraceFrame}
//!
//! let bt = Backtrace::capture()
//! let count = bt.frame_count()
//! for i in 0 to count {
//!     let frame = bt.frame(i)
//!     // process frame...
//! }
//! ```
//!
//! # Platform Support
//!
//! ## Windows
//!
//! - **Capture**: `RtlCaptureStackBackTrace` (kernel32)
//! - **Resolution**: DbgHelp API (`SymFromAddr`, `SymGetLineFromAddr64`)
//! - **Symbols**: Requires PDB files (or embedded DWARF debug info)
//! - **Initialization**: `SymInitialize` called automatically on first capture
//! - **Thread safety**: Symbol operations protected by critical section
//!
//! ## Linux/macOS (planned)
//!
//! - **Capture**: `backtrace()` from `execinfo.h`
//! - **Resolution**: `dladdr` for basic symbols, `libbacktrace` for full info
//! - **Symbols**: DWARF debug info (`.debug_info` sections)
//!
//! # Symbol Resolution Notes
//!
//! - **Debug builds** (`-g`): Full symbol names, file paths, and line numbers
//! - **Release builds** (default `-O3`): Minimal symbols unless debug info is kept
//! - **Symbol availability**: Depends on debug information in the binary
//! - **Demangling**: C++ name demangling supported on all platforms
// - Release builds: Function names only (if not stripped)
// - Inline functions: May show multiple symbols per frame address
// - Optimized code: Line numbers may be approximate due to instruction reordering
//
// ## Performance Characteristics
//
// - Capture: ~1-5 microseconds per frame (Windows)
// - Resolution: ~10-50 microseconds per frame (with symbols loaded)
// - Memory: ~64 bytes per frame + symbol string storage
//
// ## Integration
//
// Backtrace is automatically captured on:
// - panic() calls (when --backtrace flag is used)
// - assert_eq() failures (when --backtrace flag is used)

pub mod backtrace   // Main Backtrace type and capture functions
pub mod frame       // BacktraceFrame type
pub mod symbol      // BacktraceSymbol type

// Re-export main types at module level
pub use backtrace::Backtrace
pub use backtrace::BacktraceStatus
pub use backtrace::PrintFmt
pub use frame::BacktraceFrame
pub use symbol::BacktraceSymbol
pub use symbol::SymbolName

// Re-export convenience functions
pub use backtrace::print_backtrace
pub use backtrace::capture_backtrace
pub use backtrace::trace_frames
pub use backtrace::resolve_frame
pub use backtrace::clear_symbol_cache
