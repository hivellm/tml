// Tests for core::ptr RawMutPtr basic operations
use test
use core::ptr::mut_ptr::RawMutPtr
use core::ptr::const_ptr::RawPtr

@test
func test_rawmutptr_null() -> I32 {
    let p: RawMutPtr[I32] = RawMutPtr[I32].null_ptr()
    assert(p.is_null(), "null_ptr should be null")
    assert_eq(p.addr(), 0 as I64, "null addr should be 0")
    return 0
}

@test
func test_rawmutptr_from_addr() -> I32 {
    let p: RawMutPtr[I32] = RawMutPtr[I32].from_addr(0x2000)
    assert(not p.is_null(), "non-zero addr should not be null")
    assert_eq(p.addr(), 0x2000 as I64, "addr should be 0x2000")
    return 0
}

@test
func test_rawmutptr_as_const() -> I32 {
    let mp: RawMutPtr[I32] = RawMutPtr[I32].from_addr(0x3000)
    let cp: RawPtr[I32] = mp.as_const()
    assert_eq(cp.addr(), 0x3000 as I64, "as_const should preserve address")
    return 0
}
