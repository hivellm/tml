// Tests for NonNull[T] â€” partial_cmp
use test::{assert, assert_eq}
use core::ptr::non_null::NonNull

@test
func test_non_null_partial_cmp_less() -> I32 {
    let a: NonNull[I64] = NonNull::from_addr_unchecked(0x1000 as I64)
    let b: NonNull[I64] = NonNull::from_addr_unchecked(0x2000 as I64)
    let result = a.partial_cmp(ref b)
    assert(result.is_just(), "partial_cmp should return Just")
    assert(result.unwrap().is_less(), "lower addr should compare less")
    0
}

@test
func test_non_null_partial_cmp_greater() -> I32 {
    let a: NonNull[I64] = NonNull::from_addr_unchecked(0x3000 as I64)
    let b: NonNull[I64] = NonNull::from_addr_unchecked(0x1000 as I64)
    let result = a.partial_cmp(ref b)
    assert(result.is_just(), "partial_cmp should return Just")
    assert(result.unwrap().is_greater(), "higher addr should compare greater")
    0
}

@test
func test_non_null_partial_cmp_equal() -> I32 {
    let a: NonNull[I64] = NonNull::from_addr_unchecked(0x5000 as I64)
    let b: NonNull[I64] = NonNull::from_addr_unchecked(0x5000 as I64)
    let result = a.partial_cmp(ref b)
    assert(result.is_just(), "partial_cmp should return Just")
    assert(result.unwrap().is_equal(), "same addr should compare equal")
    0
}
