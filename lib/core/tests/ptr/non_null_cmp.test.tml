// Tests for NonNull[T] â€” eq, cmp, partial_cmp trait impls
use test::{assert, assert_eq}
use core::ptr::non_null::NonNull

@test
func test_non_null_eq_same_addr() -> I32 {
    let a: NonNull[I64] = NonNull::from_addr_unchecked(0x1000 as I64)
    let b: NonNull[I64] = NonNull::from_addr_unchecked(0x1000 as I64)
    assert(a.eq(ref b), "same address should be equal")
    0
}

@test
func test_non_null_eq_diff_addr() -> I32 {
    let a: NonNull[I64] = NonNull::from_addr_unchecked(0x1000 as I64)
    let b: NonNull[I64] = NonNull::from_addr_unchecked(0x2000 as I64)
    assert(not a.eq(ref b), "different addresses should not be equal")
    0
}

@test
func test_non_null_cmp_less() -> I32 {
    let a: NonNull[I64] = NonNull::from_addr_unchecked(0x1000 as I64)
    let b: NonNull[I64] = NonNull::from_addr_unchecked(0x2000 as I64)
    let ord = a.cmp(ref b)
    assert(ord.is_less(), "lower addr should be less")
    0
}

@test
func test_non_null_cmp_greater() -> I32 {
    let a: NonNull[I64] = NonNull::from_addr_unchecked(0x3000 as I64)
    let b: NonNull[I64] = NonNull::from_addr_unchecked(0x1000 as I64)
    let ord = a.cmp(ref b)
    assert(ord.is_greater(), "higher addr should be greater")
    0
}

@test
func test_non_null_cmp_equal() -> I32 {
    let a: NonNull[I64] = NonNull::from_addr_unchecked(0x5000 as I64)
    let b: NonNull[I64] = NonNull::from_addr_unchecked(0x5000 as I64)
    let ord = a.cmp(ref b)
    assert(ord.is_equal(), "same addr should be equal")
    0
}
