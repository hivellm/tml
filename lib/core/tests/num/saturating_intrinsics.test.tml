// Tests for saturating arithmetic intrinsics
use test
use core::intrinsics::{saturating_add, saturating_sub, saturating_mul}

// ============================================================================
// saturating_add
// ============================================================================

@test
func test_saturating_add_normal() -> I32 {
    assert_eq(saturating_add[I32](10, 20), 30, "10 + 20 = 30")
    return 0
}

@test
func test_saturating_add_overflow() -> I32 {
    let result: I32 = saturating_add[I32](2147483647, 100)
    assert_eq(result, 2147483647, "should saturate at I32 max")
    return 0
}

@test
func test_saturating_add_underflow() -> I32 {
    let result: I32 = saturating_add[I32](-2147483648, -100)
    assert_eq(result, -2147483648, "should saturate at I32 min")
    return 0
}

// ============================================================================
// saturating_sub
// ============================================================================

@test
func test_saturating_sub_normal() -> I32 {
    assert_eq(saturating_sub[I32](30, 10), 20, "30 - 10 = 20")
    return 0
}

@test
func test_saturating_sub_underflow() -> I32 {
    let result: I32 = saturating_sub[I32](-2147483648, 100)
    assert_eq(result, -2147483648, "should saturate at I32 min")
    return 0
}

// ============================================================================
// saturating_mul
// ============================================================================

@test
func test_saturating_mul_normal() -> I32 {
    assert_eq(saturating_mul[I32](6, 7), 42, "6 * 7 = 42")
    return 0
}

@test
func test_saturating_mul_overflow() -> I32 {
    let result: I32 = saturating_mul[I32](2147483647, 2)
    assert_eq(result, 2147483647, "should saturate at I32 max")
    return 0
}

@test
func test_saturating_mul_zero() -> I32 {
    assert_eq(saturating_mul[I32](999999, 0), 0, "anything * 0 = 0")
    return 0
}
