// Tests for core::num::nonzero module
use test
use core::num::nonzero::NonZero

// ============================================================================
// NonZero::new Tests
// ============================================================================

@test
func test_nonzero_new_with_positive_i32() -> I32 {
    let result: Maybe[NonZero[I32]] = NonZero::new[I32](42)
    assert(result.is_just(), "NonZero::new(42) should return Just")
    return 0
}

@test
func test_nonzero_new_with_zero_i32() -> I32 {
    let result: Maybe[NonZero[I32]] = NonZero::new[I32](0)
    assert(result.is_nothing(), "NonZero::new(0) should return Nothing")
    return 0
}

@test
func test_nonzero_new_with_negative_i32() -> I32 {
    let result: Maybe[NonZero[I32]] = NonZero::new[I32](-5)
    assert(result.is_just(), "NonZero::new(-5) should return Just (negative is not zero)")
    return 0
}

// ============================================================================
// NonZero::get Tests
// ============================================================================

@test
func test_nonzero_get_i32() -> I32 {
    let result: Maybe[NonZero[I32]] = NonZero::new[I32](42)
    when result {
        Just(n) => {
            assert_eq(n.get(), 42, "NonZero.get() should return the value")
            return 0
        },
        Nothing => {
            assert(false, "Should not be Nothing")
            return 1
        }
    }
}

@test
func test_nonzero_get_negative() -> I32 {
    let result: Maybe[NonZero[I32]] = NonZero::new[I32](-100)
    when result {
        Just(n) => {
            assert_eq(n.get(), -100, "NonZero.get() should return negative value")
            return 0
        },
        Nothing => {
            assert(false, "Should not be Nothing")
            return 1
        }
    }
}

// ============================================================================
// NonZero with I64 Tests
// ============================================================================

@test
func test_nonzero_i64_positive() -> I32 {
    let result: Maybe[NonZero[I64]] = NonZero::new[I64](1000000)
    assert(result.is_just(), "NonZero::new[I64](1000000) should return Just")
    return 0
}

@test
func test_nonzero_i64_zero() -> I32 {
    let zero: I64 = 0
    let result: Maybe[NonZero[I64]] = NonZero::new[I64](zero)
    assert(result.is_nothing(), "NonZero::new[I64](0) should return Nothing")
    return 0
}

// ============================================================================
// NonZero Duplicate Tests
// ============================================================================

@test
func test_nonzero_duplicate() -> I32 {
    let a: Maybe[NonZero[I32]] = NonZero::new[I32](42)
    when a {
        Just(na) => {
            let cloned: NonZero[I32] = na.duplicate()
            assert_eq(cloned.get(), 42, "Duplicated NonZero should have same value")
            return 0
        },
        Nothing => { return 1 }
    }
}
