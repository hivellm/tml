// Test closure stored in struct field
use test

pub type FuncHolder {
    f: func(I32) -> I32
}

@test
func test_closure_in_field() -> I32 {
    let double: func(I32) -> I32 = do(x: I32) -> I32 { x * 2 }
    let holder: FuncHolder = FuncHolder { f: double }

    // Extract function from field and call
    let mapper: func(I32) -> I32 = holder.f
    let result: I32 = mapper(5)
    assert_eq(result, 10, "5 * 2 should be 10")
    return 0
}

