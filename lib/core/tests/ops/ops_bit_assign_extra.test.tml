// Tests for ops/bit compound assign — uncovered types
// Covers all 22 uncovered _assign functions from coverage report
use test::{assert, assert_eq}

// =============================================================================
// Bitwise AND assign — I16, U8, U16, U64
// =============================================================================

@test
func test_i16_bitand_assign() -> I32 {
    var a: I16 = 0xFF as I16
    a &= 0x0F as I16
    assert_eq(a as I32, 0x0F, "I16 &=")
    return 0
}

@test
func test_u8_bitand_assign() -> I32 {
    var a: U8 = 0xFF as U8
    a &= 0x0F as U8
    assert_eq(a as I32, 0x0F, "U8 &=")
    return 0
}

@test
func test_u16_bitand_assign() -> I32 {
    var a: U16 = 0xFF as U16
    a &= 0x0F as U16
    assert_eq(a as I32, 0x0F, "U16 &=")
    return 0
}

@test
func test_u64_bitand_assign() -> I32 {
    var a: U64 = 0xFF as U64
    a &= 0x0F as U64
    assert_eq(a as I64, 0x0F as I64, "U64 &=")
    return 0
}

// =============================================================================
// Bitwise OR assign — I8, I64, U8, U16, U64
// =============================================================================

@test
func test_i8_bitor_assign() -> I32 {
    var a: I8 = 0x0F as I8
    a |= 0x70 as I8
    assert_eq(a as I32, 0x7F, "I8 |=")
    return 0
}

@test
func test_i64_bitor_assign() -> I32 {
    var a: I64 = 0x0F as I64
    a |= 0xF0 as I64
    assert_eq(a as I32, 0xFF, "I64 |=")
    return 0
}

@test
func test_u8_bitor_assign() -> I32 {
    var a: U8 = 0x0F as U8
    a |= 0xF0 as U8
    assert_eq(a as I32, 0xFF, "U8 |=")
    return 0
}

@test
func test_u16_bitor_assign() -> I32 {
    var a: U16 = 0x0F as U16
    a |= 0xF0 as U16
    assert_eq(a as I32, 0xFF, "U16 |=")
    return 0
}

@test
func test_u64_bitor_assign() -> I32 {
    var a: U64 = 0x0F as U64
    a |= 0xF0 as U64
    assert_eq(a as I64, 0xFF as I64, "U64 |=")
    return 0
}

// =============================================================================
// Bitwise XOR assign — I8, I16, I64, U16, U32
// =============================================================================

@test
func test_i8_bitxor_assign() -> I32 {
    var a: I8 = 0x7F as I8
    a ^= 0x0F as I8
    assert_eq(a as I32, 0x70, "I8 ^=")
    return 0
}

@test
func test_i16_bitxor_assign() -> I32 {
    var a: I16 = 0xFF as I16
    a ^= 0x0F as I16
    assert_eq(a as I32, 0xF0, "I16 ^=")
    return 0
}

@test
func test_i64_bitxor_assign() -> I32 {
    var a: I64 = 0xFF as I64
    a ^= 0x0F as I64
    assert_eq(a as I32, 0xF0, "I64 ^=")
    return 0
}

@test
func test_u16_bitxor_assign() -> I32 {
    var a: U16 = 0xFF as U16
    a ^= 0x0F as U16
    assert_eq(a as I32, 0xF0, "U16 ^=")
    return 0
}

@test
func test_u32_bitxor_assign() -> I32 {
    var a: U32 = 0xFF as U32
    a ^= 0x0F as U32
    assert_eq(a as I32, 0xF0, "U32 ^=")
    return 0
}

// =============================================================================
// Shift left assign — I8, I16, U8, U64
// =============================================================================

@test
func test_i8_shl_assign() -> I32 {
    var a: I8 = 1 as I8
    a <<= 3
    assert_eq(a as I32, 8, "I8 <<=")
    return 0
}

@test
func test_i16_shl_assign() -> I32 {
    var a: I16 = 1 as I16
    a <<= 4
    assert_eq(a as I32, 16, "I16 <<=")
    return 0
}

@test
func test_u8_shl_assign() -> I32 {
    var a: U8 = 1 as U8
    a <<= 5
    assert_eq(a as I32, 32, "U8 <<=")
    return 0
}

@test
func test_u64_shl_assign() -> I32 {
    var a: U64 = 1 as U64
    a <<= 10
    assert_eq(a as I64, 1024 as I64, "U64 <<=")
    return 0
}

// =============================================================================
// Shift right assign — I8, I16, U16, U64
// =============================================================================

@test
func test_i8_shr_assign() -> I32 {
    var a: I8 = 64 as I8
    a >>= 3
    assert_eq(a as I32, 8, "I8 >>=")
    return 0
}

@test
func test_i16_shr_assign() -> I32 {
    var a: I16 = 256 as I16
    a >>= 4
    assert_eq(a as I32, 16, "I16 >>=")
    return 0
}

@test
func test_u16_shr_assign() -> I32 {
    var a: U16 = 256 as U16
    a >>= 4
    assert_eq(a as I32, 16, "U16 >>=")
    return 0
}

@test
func test_u64_shr_assign() -> I32 {
    var a: U64 = 1024 as U64
    a >>= 5
    assert_eq(a as I64, 32 as I64, "U64 >>=")
    return 0
}
