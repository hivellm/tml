// @flags enum with explicit discriminant values and composite flags
use test

@flags
type Style {
    Bold = 1,
    Italic = 2,
    Underline = 4,
    Strikethrough = 8,
    BoldItalic = 3,
}

@test
func test_explicit_discriminants() -> I32 {
    assert_eq(Style::Bold.bits(), 1, "Bold should be 1")
    assert_eq(Style::Italic.bits(), 2, "Italic should be 2")
    assert_eq(Style::Underline.bits(), 4, "Underline should be 4")
    assert_eq(Style::Strikethrough.bits(), 8, "Strikethrough should be 8")
    return 0
}

@test
func test_composite_discriminant() -> I32 {
    let bi = Style::BoldItalic
    assert_eq(bi.bits(), 3, "BoldItalic should be 3")
    assert(bi.has(Style::Bold), "BoldItalic should have Bold")
    assert(bi.has(Style::Italic), "BoldItalic should have Italic")
    assert(not bi.has(Style::Underline), "BoldItalic should not have Underline")
    return 0
}

@test
func test_explicit_all() -> I32 {
    let all = Style::all()
    assert_eq(all.bits(), 15, "all() should be 15 (1|2|4|8|3 = 15)")
    return 0
}
