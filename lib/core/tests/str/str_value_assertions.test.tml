// Tests for str functions - proper value assertions
use test
use core::str::{
    trim, trim_start, trim_end,
    replace,
    substring, substring_from, substring_to
}

// =============================================================================
// trim variations
// =============================================================================

@test
func test_trim_both_sides() -> I32 {
    let s: Str = trim("  hello  ")
    assert_eq(s, "hello", "trim both sides")
    return 0
}

@test
func test_trim_no_whitespace() -> I32 {
    let s: Str = trim("hello")
    assert_eq(s, "hello", "trim with no whitespace")
    return 0
}

@test
func test_trim_start_spaces() -> I32 {
    let s: Str = trim_start("   hello")
    assert_eq(s, "hello", "trim_start leading spaces")
    return 0
}

@test
func test_trim_end_spaces() -> I32 {
    let s: Str = trim_end("hello   ")
    assert_eq(s, "hello", "trim_end trailing spaces")
    return 0
}

@test
func test_trim_empty() -> I32 {
    let s: Str = trim("")
    assert_eq(s, "", "trim empty string")
    return 0
}

// =============================================================================
// replace
// =============================================================================

@test
func test_replace_word() -> I32 {
    let s: Str = replace("hello world", "world", "TML")
    assert_eq(s, "hello TML", "replace word")
    return 0
}

@test
func test_replace_not_found() -> I32 {
    let s: Str = replace("hello", "xyz", "abc")
    assert_eq(s, "hello", "replace with no match should be unchanged")
    return 0
}

@test
func test_replace_all_occurrences() -> I32 {
    let s: Str = replace("abab", "ab", "X")
    assert_eq(s, "XX", "replace should replace all occurrences")
    return 0
}

@test
func test_replace_char() -> I32 {
    let s: Str = replace("hello", "l", "r")
    assert_eq(s, "herro", "replace single char")
    return 0
}

// =============================================================================
// substring
// =============================================================================

@test
func test_substring_middle() -> I32 {
    let s: Str = substring("hello", 1, 4)
    assert_eq(s, "ell", "substring(hello, 1, 4) should be ell")
    return 0
}

@test
func test_substring_full() -> I32 {
    let s: Str = substring("hello", 0, 5)
    assert_eq(s, "hello", "substring(hello, 0, 5) should be hello")
    return 0
}

@test
func test_substring_from_start() -> I32 {
    let s: Str = substring("abcde", 0, 3)
    assert_eq(s, "abc", "substring(abcde, 0, 3) should be abc")
    return 0
}

@test
func test_substring_from() -> I32 {
    let s: Str = substring_from("hello", 2)
    assert_eq(s, "llo", "substring_from(hello, 2) should be llo")
    return 0
}

@test
func test_substring_to() -> I32 {
    let s: Str = substring_to("hello", 3)
    assert_eq(s, "hel", "substring_to(hello, 3) should be hel")
    return 0
}
