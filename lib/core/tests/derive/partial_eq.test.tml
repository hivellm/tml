// Tests for @derive(PartialEq) macro
use test

// ============================================================================
// Simple Struct Tests
// ============================================================================

@derive(PartialEq)
type DeriveTestPoint {
    x: I32,
    y: I32
}

@test
func test_point_eq_same() -> I32 {
    let p1: DeriveTestPoint = DeriveTestPoint { x: 1, y: 2 }
    let p2: DeriveTestPoint = DeriveTestPoint { x: 1, y: 2 }
    let result: Bool = p1.eq(ref p2)
    assert(result, "Points with same values should be equal")
    return 0
}

@test
func test_point_eq_different_x() -> I32 {
    let p1: DeriveTestPoint = DeriveTestPoint { x: 1, y: 2 }
    let p2: DeriveTestPoint = DeriveTestPoint { x: 3, y: 2 }
    let result: Bool = p1.eq(ref p2)
    assert(not result, "Points with different x should not be equal")
    return 0
}

@test
func test_point_eq_different_y() -> I32 {
    let p1: DeriveTestPoint = DeriveTestPoint { x: 1, y: 2 }
    let p2: DeriveTestPoint = DeriveTestPoint { x: 1, y: 5 }
    let result: Bool = p1.eq(ref p2)
    assert(not result, "Points with different y should not be equal")
    return 0
}

// ============================================================================
// Multiple Derives Test
// ============================================================================

@derive(PartialEq, Duplicate)
type DeriveTestRectangle {
    width: I32,
    height: I32
}

@test
func test_rectangle_eq() -> I32 {
    let r1: DeriveTestRectangle = DeriveTestRectangle { width: 10, height: 20 }
    let r2: DeriveTestRectangle = DeriveTestRectangle { width: 10, height: 20 }
    let result: Bool = r1.eq(ref r2)
    assert(result, "Rectangles with same values should be equal")
    return 0
}

@test
func test_rectangle_duplicate() -> I32 {
    let r1: DeriveTestRectangle = DeriveTestRectangle { width: 10, height: 20 }
    let r2: DeriveTestRectangle = r1.duplicate()
    assert(r2.width == 10, "Duplicated rectangle should have same width")
    assert(r2.height == 20, "Duplicated rectangle should have same height")
    return 0
}
