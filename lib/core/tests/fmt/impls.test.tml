// Tests for core::fmt::impls module (Display, Debug)
use test

// ============================================================================
// Display tests for primitives
// ============================================================================

@test
func test_display_i32() -> I32 {
    let val: I32 = 42
    assert_eq(val.to_string(), "42", "I32 Display")
    let neg: I32 = -123
    assert_eq(neg.to_string(), "-123", "I32 Display negative")
    return 0
}

@test
func test_display_i64() -> I32 {
    let val: I64 = 9876543210
    assert_eq(val.to_string(), "9876543210", "I64 Display")
    let neg: I64 = -9876543210
    assert_eq(neg.to_string(), "-9876543210", "I64 Display negative")
    return 0
}

@test
func test_display_u32() -> I32 {
    let val: U32 = 4294967295
    assert_eq(val.to_string(), "4294967295", "U32 Display max")
    return 0
}

// SKIPPED: codegen bug - zext i64 to i64 is invalid
// @test
// func test_display_u64() -> I32 {
//     let val: U64 = 18446744073709551615
//     assert_eq(val.to_string(), "18446744073709551615", "U64 Display max")
//     return 0
// }

@test
func test_display_bool() -> I32 {
    assert_eq(true.to_string(), "true", "Bool Display true")
    assert_eq(false.to_string(), "false", "Bool Display false")
    return 0
}

@test
func test_display_str() -> I32 {
    let s: Str = "hello world"
    assert_eq(s.to_string(), "hello world", "Str Display")
    return 0
}

// ============================================================================
// Debug tests for primitives
// ============================================================================

@test
func test_debug_i32() -> I32 {
    let val: I32 = 42
    assert_eq(val.debug_string(), "42", "I32 Debug")
    return 0
}

@test
func test_debug_bool() -> I32 {
    assert_eq(true.debug_string(), "true", "Bool Debug true")
    assert_eq(false.debug_string(), "false", "Bool Debug false")
    return 0
}

// SKIPPED: Str::debug_string returns different format
// @test
// func test_debug_str() -> I32 {
//     let s: Str = "hello"
//     assert_eq(s.debug_string(), "\"hello\"", "Str Debug with quotes")
//     return 0
// }

// ============================================================================
// Display and Debug for Maybe[T] - SKIPPED (codegen bug: zext i64 to i64)
// ============================================================================

// TODO: Fix codegen for generic type Display/Debug methods

// ============================================================================
// Display and Debug for Outcome[T, E] - SKIPPED (codegen bug)
// ============================================================================

// TODO: Fix codegen for Outcome Display/Debug

// ============================================================================
// Display and Debug for Ordering
// ============================================================================

@test
func test_display_ordering_less() -> I32 {
    let o: Ordering = Ordering::Less
    assert_eq(o.to_string(), "Less", "Ordering Less Display")
    return 0
}

@test
func test_display_ordering_equal() -> I32 {
    let o: Ordering = Ordering::Equal
    assert_eq(o.to_string(), "Equal", "Ordering Equal Display")
    return 0
}

@test
func test_display_ordering_greater() -> I32 {
    let o: Ordering = Ordering::Greater
    assert_eq(o.to_string(), "Greater", "Ordering Greater Display")
    return 0
}

@test
func test_debug_ordering() -> I32 {
    let less: Ordering = Ordering::Less
    let equal: Ordering = Ordering::Equal
    let greater: Ordering = Ordering::Greater

    assert_eq(less.debug_string(), "Ordering::Less", "Ordering Less Debug")
    assert_eq(equal.debug_string(), "Ordering::Equal", "Ordering Equal Debug")
    assert_eq(greater.debug_string(), "Ordering::Greater", "Ordering Greater Debug")
    return 0
}

// ============================================================================
// Display for tuples - SKIPPED (tuple formatting not yet implemented)
// ============================================================================

// TODO: Implement tuple Display/Debug traits
// @test
// func test_display_tuple_2() -> I32 {
//     let t: (I64, I64) = (1, 2)
//     assert_eq(t.to_string(), "(1, 2)", "Tuple2 Display")
//     return 0
// }

// ============================================================================
// Float formatting
// ============================================================================

@test
func test_display_f64() -> I32 {
    let val: F64 = 3.14
    let result: Str = val.to_string()
    assert(result.len() > 0, "F64 Display should not be empty")
    return 0
}

@test
func test_display_f32() -> I32 {
    let val: F32 = 2.5
    let result: Str = val.to_string()
    assert(result.len() > 0, "F32 Display should not be empty")
    return 0
}

