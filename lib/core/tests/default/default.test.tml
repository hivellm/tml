// Tests for core::default module
use test
use core::default::Default

// ============================================================================
// Custom type with Default impl
// ============================================================================

type Point {
    x: I32,
    y: I32
}

impl Default for Point {
    pub func default() -> Point {
        return Point { x: 0, y: 0 }
    }
}

type Counter {
    count: I64,
    name: Str
}

impl Default for Counter {
    pub func default() -> Counter {
        return Counter { count: 0, name: "unnamed" }
    }
}

// ============================================================================
// Custom type Default tests
// ============================================================================

@test
func test_point_default() -> I32 {
    let p: Point = Point::default()
    assert_eq(p.x, 0, "default x should be 0")
    assert_eq(p.y, 0, "default y should be 0")
    return 0
}

@test
func test_counter_default() -> I32 {
    let c: Counter = Counter::default()
    assert_eq(c.count, 0, "default count should be 0")
    assert_eq(c.name, "unnamed", "default name should be unnamed")
    return 0
}

// ============================================================================
// Primitive type Default tests
// ============================================================================

@test
func test_i32_default() -> I32 {
    let val: I32 = I32::default()
    assert_eq(val, 0, "I32 default should be 0")
    return 0
}

@test
func test_i64_default() -> I32 {
    let val: I64 = I64::default()
    assert_eq(val, 0, "I64 default should be 0")
    return 0
}

@test
func test_i8_default() -> I32 {
    let val: I8 = I8::default()
    assert_eq(val as I32, 0, "I8 default should be 0")
    return 0
}

@test
func test_i16_default() -> I32 {
    let val: I16 = I16::default()
    assert_eq(val as I32, 0, "I16 default should be 0")
    return 0
}

@test
func test_u32_default() -> I32 {
    let val: U32 = U32::default()
    assert_eq(val, 0, "U32 default should be 0")
    return 0
}

@test
func test_u64_default() -> I32 {
    let val: U64 = U64::default()
    assert_eq(val, 0, "U64 default should be 0")
    return 0
}

@test
func test_bool_default() -> I32 {
    let val: Bool = Bool::default()
    assert(not val, "Bool default should be false")
    return 0
}

@test
func test_str_default() -> I32 {
    let val: Str = Str::default()
    assert_eq(val, "", "Str default should be empty")
    return 0
}
