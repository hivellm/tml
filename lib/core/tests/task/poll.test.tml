// Tests for core::task - Poll[T] enum
use test
use core::task::{Poll}

@test
func test_poll_ready() -> I32 {
    let p: Poll[I32] = Poll::Ready(42 as I32)
    assert(p.is_ready(), "Ready should be ready")
    assert(not p.is_pending(), "Ready should not be pending")
    return 0
}

@test
func test_poll_pending() -> I32 {
    let p: Poll[I32] = Poll::Pending
    assert(p.is_pending(), "Pending should be pending")
    assert(not p.is_ready(), "Pending should not be ready")
    return 0
}

@test
func test_poll_ready_to_maybe() -> I32 {
    let p: Poll[I32] = Poll::Ready(99 as I32)
    let m: Maybe[I32] = p.ready()
    assert(m.is_just(), "Ready.ready() should be Just")
    let p2: Poll[I32] = Poll::Pending
    let m2: Maybe[I32] = p2.ready()
    assert(m2.is_nothing(), "Pending.ready() should be Nothing")
    return 0
}
