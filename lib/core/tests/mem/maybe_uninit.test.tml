// Tests for core::mem::MaybeUninit
use test
use core::mem::MaybeUninit

@test
func test_maybe_uninit_new_assume_init() -> I32 {
    let m: MaybeUninit[I32] = MaybeUninit::new[I32](42)
    let val: I32 = m.assume_init()
    assert_eq(val, 42, "new + assume_init should return value")
    return 0
}

@test
func test_maybe_uninit_write_assume_init() -> I32 {
    var m: MaybeUninit[I32] = MaybeUninit::new[I32](0)
    m.write(99)
    let val: I32 = m.assume_init()
    assert_eq(val, 99, "write should overwrite value")
    return 0
}

@test
func test_maybe_uninit_assume_init_ref() -> I32 {
    let m: MaybeUninit[I32] = MaybeUninit::new[I32](77)
    let r: ref I32 = m.assume_init_ref()
    assert_eq(*r, 77, "assume_init_ref should return reference")
    return 0
}
