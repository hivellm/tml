// Tests for core::cache - CacheAligned and Padded
use test
use core::cache::{CacheAligned, Padded, CACHE_LINE_SIZE, HALF_CACHE_LINE, DOUBLE_CACHE_LINE}

@test
func test_cache_aligned_new() -> I32 {
    let aligned: CacheAligned[I32] = CacheAligned::new(42 as I32)
    assert_eq(*aligned.get(), 42 as I32, "CacheAligned stores value")
    return 0
}

@test
func test_cache_aligned_into_inner() -> I32 {
    let aligned: CacheAligned[I64] = CacheAligned::new(999 as I64)
    let val: I64 = aligned.into_inner()
    assert_eq(val, 999 as I64, "into_inner returns stored value")
    return 0
}

@test
func test_cache_constants() -> I32 {
    assert_eq(CACHE_LINE_SIZE, 64 as I64, "CACHE_LINE_SIZE is 64")
    assert_eq(HALF_CACHE_LINE, 32 as I64, "HALF_CACHE_LINE is 32")
    assert_eq(DOUBLE_CACHE_LINE, 128 as I64, "DOUBLE_CACHE_LINE is 128")
    return 0
}
