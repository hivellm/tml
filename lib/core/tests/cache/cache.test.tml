// Consolidated tests for core::cache (9 tests)
use test
use core::cache::{CacheAligned, Padded, SoaVec, CACHE_LINE_SIZE, HALF_CACHE_LINE, DOUBLE_CACHE_LINE}

// --- CacheAligned tests ---

@test
func test_cache_aligned_new() -> I32 {
    let aligned: CacheAligned[I32] = CacheAligned::new(42 as I32)
    assert_eq(*aligned.get(), 42 as I32, "CacheAligned stores value")
    return 0
}

@test
func test_cache_aligned_into_inner() -> I32 {
    let aligned: CacheAligned[I64] = CacheAligned::new(999 as I64)
    let val: I64 = aligned.into_inner()
    assert_eq(val, 999 as I64, "into_inner returns stored value")
    return 0
}

@test
func test_cache_constants() -> I32 {
    assert_eq(CACHE_LINE_SIZE, 64 as I64, "CACHE_LINE_SIZE is 64")
    assert_eq(HALF_CACHE_LINE, 32 as I64, "HALF_CACHE_LINE is 32")
    assert_eq(DOUBLE_CACHE_LINE, 128 as I64, "DOUBLE_CACHE_LINE is 128")
    return 0
}

// --- Padded tests ---

@test
func test_padded_new() -> I32 {
    let p: Padded[I32] = Padded::new(100 as I32)
    assert_eq(*p.get(), 100 as I32, "Padded stores value")
    return 0
}

@test
func test_padded_set() -> I32 {
    var p: Padded[I32] = Padded::new(0 as I32)
    p.set(42 as I32)
    assert_eq(*p.get(), 42 as I32, "Padded::set updates value")
    return 0
}

@test
func test_padded_into_inner() -> I32 {
    let p: Padded[I64] = Padded::new(777 as I64)
    let val: I64 = p.into_inner()
    assert_eq(val, 777 as I64, "into_inner returns stored value")
    return 0
}

// --- SoaVec tests ---

@test
func test_soavec_new() -> I32 {
    let soa: SoaVec = SoaVec::new()
    assert_eq(soa.len(), 0 as I64, "new len 0")
    assert_eq(soa.column_count(), 0 as I64, "new column_count 0")
    assert(soa.is_empty(), "new is_empty")
    return 0
}

@test
func test_soavec_with_capacity() -> I32 {
    let soa: SoaVec = SoaVec::with_capacity(100 as I64)
    assert_eq(soa.len(), 0 as I64, "with_capacity len 0")
    assert(soa.is_empty(), "with_capacity is_empty")
    return 0
}

@test
func test_soavec_clear() -> I32 {
    var soa: SoaVec = SoaVec::new()
    soa.clear()
    assert_eq(soa.len(), 0 as I64, "clear len 0")
    assert(soa.is_empty(), "clear is_empty")
    return 0
}
