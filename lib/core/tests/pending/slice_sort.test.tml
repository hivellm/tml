// Tests for core::slice::sort - MutSlice sorting
use test
use core::slice::MutSlice

@test
func test_mut_slice_is_sorted_empty() -> I32 {
    let ptr: *Unit = alloc(4)
    let mut slice: MutSlice[I32] = MutSlice {
        data: ptr,
        len: 0
    }
    assert(slice.is_sorted(), "empty slice should be sorted")
    dealloc(ptr)
    return 0
}

@test
func test_mut_slice_is_sorted_single() -> I32 {
    let ptr: *Unit = alloc(4)
    atomic_store(ptr, 42)
    let mut slice: MutSlice[I32] = MutSlice {
        data: ptr,
        len: 1
    }
    assert(slice.is_sorted(), "single element should be sorted")
    dealloc(ptr)
    return 0
}

@test
func test_mut_slice_is_sorted_true() -> I32 {
    let ptr: *Unit = alloc(12)
    atomic_store(ptr, 1)
    atomic_store(ptr_offset(ptr, 4), 2)
    atomic_store(ptr_offset(ptr, 8), 3)
    let mut slice: MutSlice[I32] = MutSlice {
        data: ptr,
        len: 3
    }
    assert(slice.is_sorted(), "[1,2,3] should be sorted")
    dealloc(ptr)
    return 0
}
