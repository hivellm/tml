// Tests for core::char::methods â€” character classification functions
use test::{assert, assert_eq}
use core::char

@test
func test_char_is_valid() -> I32 {
    assert(char::is_valid(0x0041 as U32), "A should be valid")
    assert(char::is_valid(0 as U32), "0 should be valid")
    assert(char::is_valid(0x10FFFF as U32), "max codepoint should be valid")
    assert(not char::is_valid(0xD800 as U32), "surrogate should be invalid")
    assert(not char::is_valid(0xDFFF as U32), "surrogate end should be invalid")
    assert(not char::is_valid(0x110000 as U32), "above max should be invalid")
    return 0
}

@test
func test_char_is_alphabetic() -> I32 {
    let a: Char = 97 as Char
    assert(char::is_alphabetic(a), "a should be alphabetic")
    let z: Char = 90 as Char
    assert(char::is_alphabetic(z), "Z should be alphabetic")
    let digit: Char = 48 as Char
    assert(not char::is_alphabetic(digit), "0 should not be alphabetic")
    return 0
}

@test
func test_char_is_lowercase_uppercase() -> I32 {
    let lower_a: Char = 97 as Char
    assert(char::is_lowercase(lower_a), "a should be lowercase")
    assert(not char::is_uppercase(lower_a), "a should not be uppercase")
    let upper_a: Char = 65 as Char
    assert(char::is_uppercase(upper_a), "A should be uppercase")
    assert(not char::is_lowercase(upper_a), "A should not be lowercase")
    return 0
}

@test
func test_char_is_whitespace() -> I32 {
    let space: Char = 32 as Char
    assert(char::is_whitespace(space), "space should be whitespace")
    let tab: Char = 9 as Char
    assert(char::is_whitespace(tab), "tab should be whitespace")
    let newline: Char = 10 as Char
    assert(char::is_whitespace(newline), "LF should be whitespace")
    let a: Char = 65 as Char
    assert(not char::is_whitespace(a), "A should not be whitespace")
    return 0
}

@test
func test_char_is_numeric() -> I32 {
    let zero: Char = 48 as Char
    assert(char::is_numeric(zero), "0 should be numeric")
    let nine: Char = 57 as Char
    assert(char::is_numeric(nine), "9 should be numeric")
    let a: Char = 65 as Char
    assert(not char::is_numeric(a), "A should not be numeric")
    return 0
}

@test
func test_char_is_alphanumeric() -> I32 {
    let a: Char = 97 as Char
    assert(char::is_alphanumeric(a), "a should be alphanumeric")
    let five: Char = 53 as Char
    assert(char::is_alphanumeric(five), "5 should be alphanumeric")
    let space: Char = 32 as Char
    assert(not char::is_alphanumeric(space), "space should not be alphanumeric")
    return 0
}

// =============================================================================
// Non-ASCII classification (exercises *_nonascii internal helpers)
// =============================================================================

@test
func test_is_lowercase_nonascii() -> I32 {
    // Greek lowercase alpha (U+03B1)
    assert(char::is_lowercase(0x03B1 as Char), "Greek alpha is lowercase")
    // Greek uppercase Alpha (U+0391) is not lowercase
    assert(not char::is_lowercase(0x0391 as Char), "Greek Alpha is not lowercase")
    return 0
}

@test
func test_is_uppercase_nonascii() -> I32 {
    // Greek uppercase Alpha (U+0391)
    assert(char::is_uppercase(0x0391 as Char), "Greek Alpha is uppercase")
    // Greek lowercase alpha (U+03B1) is not uppercase
    assert(not char::is_uppercase(0x03B1 as Char), "Greek alpha is not uppercase")
    return 0
}

@test
func test_is_whitespace_nonascii() -> I32 {
    // Em space (U+2003) is whitespace
    assert(char::is_whitespace(0x2003 as Char), "em space is whitespace")
    // Regular letter is not whitespace
    assert(not char::is_whitespace(0x03B1 as Char), "Greek alpha is not whitespace")
    return 0
}

@test
func test_is_numeric_nonascii() -> I32 {
    // Arabic-Indic digit zero (U+0660)
    assert(char::is_numeric(0x0660 as Char), "Arabic-Indic 0 is numeric")
    // Extended Arabic-Indic digit 5 (U+06F5)
    assert(char::is_numeric(0x06F5 as Char), "Extended Arabic-Indic 5 is numeric")
    // Fullwidth digit 3 (U+FF13)
    assert(char::is_numeric(0xFF13 as Char), "Fullwidth 3 is numeric")
    // Superscript 2 (U+00B2)
    assert(char::is_numeric(0x00B2 as Char), "Superscript 2 is numeric")
    // Greek alpha (not a digit)
    assert(not char::is_numeric(0x03B1 as Char), "Greek alpha is not numeric")
    return 0
}
