// Tests for core::hash — Hasher, BuildHasher, and primitive Hash impls coverage
use test::{assert}
use core::hash::{DefaultHasher, RandomState, BuildHasher}

// ============================================================================
// Primitive Hash impls — each calls T::hash() to trigger coverage
// ============================================================================

@test
func test_i8_hash() -> I32 {
    let v: I8 = 42 as I8
    let h: I64 = v.hash()
    assert(true, "I8::hash ran")
    return 0
}

@test
func test_i16_hash() -> I32 {
    let v: I16 = 1000 as I16
    let h: I64 = v.hash()
    assert(true, "I16::hash ran")
    return 0
}

@test
func test_i32_hash() -> I32 {
    let v: I32 = 99999
    let h: I64 = v.hash()
    assert(true, "I32::hash ran")
    return 0
}

@test
func test_i64_hash() -> I32 {
    let v: I64 = 123456789 as I64
    let h: I64 = v.hash()
    assert(true, "I64::hash ran")
    return 0
}

@test
func test_u8_hash() -> I32 {
    let v: U8 = 200 as U8
    let h: I64 = v.hash()
    assert(true, "U8::hash ran")
    return 0
}

@test
func test_u16_hash() -> I32 {
    let v: U16 = 50000 as U16
    let h: I64 = v.hash()
    assert(true, "U16::hash ran")
    return 0
}

@test
func test_u32_hash() -> I32 {
    let v: U32 = 100000 as U32
    let h: I64 = v.hash()
    assert(true, "U32::hash ran")
    return 0
}

@test
func test_u64_hash() -> I32 {
    let v: U64 = 999 as U64
    let h: I64 = v.hash()
    assert(true, "U64::hash ran")
    return 0
}

@test
func test_bool_hash() -> I32 {
    let ht: I64 = true.hash()
    let hf: I64 = false.hash()
    assert(true, "Bool::hash ran")
    return 0
}

@test
func test_str_hash() -> I32 {
    let h: I64 = "hello".hash()
    assert(true, "Str::hash ran")
    return 0
}

// ============================================================================
// DefaultHasher — write_u8, write_i32, write_i64, finish
// ============================================================================

@test
func test_hasher_write_u8_finish() -> I32 {
    var hasher = DefaultHasher::new()
    hasher.write_u8(42 as U8)
    let h: I64 = hasher.finish()
    assert(true, "DefaultHasher::write_u8 + finish")
    return 0
}

@test
func test_hasher_write_i32() -> I32 {
    var hasher = DefaultHasher::new()
    hasher.write_i32(12345)
    let h: I64 = hasher.finish()
    assert(true, "DefaultHasher::write_i32")
    return 0
}

@test
func test_hasher_write_i64() -> I32 {
    var hasher = DefaultHasher::new()
    hasher.write_i64(987654321 as I64)
    let h: I64 = hasher.finish()
    assert(true, "DefaultHasher::write_i64")
    return 0
}

// ============================================================================
// BuildHasher — build_hasher
// ============================================================================

@test
func test_build_hasher() -> I32 {
    let state = RandomState::new()
    var hasher = state.build_hasher()
    hasher.write_u8(1 as U8)
    let h: I64 = hasher.finish()
    assert(true, "BuildHasher::build_hasher")
    return 0
}
