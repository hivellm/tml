// Tests for Array map with I64 type and accumulation patterns
use test

@test
func test_array_map_i64_square() -> I32 {
    let arr: [I64; 4] = [1, 2, 3, 4]
    let squared: [I64; 4] = arr.map(do(x: I64) -> I64 { return x * x })
    assert(squared[0] == 1, "map square[0]")
    assert(squared[1] == 4, "map square[1]")
    assert(squared[2] == 9, "map square[2]")
    assert(squared[3] == 16, "map square[3]")
    return 0
}

@test
func test_array_accumulate() -> I32 {
    let arr: [I32; 5] = [1, 2, 3, 4, 5]
    var sum: I32 = 0
    var i: I64 = 0
    loop (i < arr.len()) {
        sum = sum + arr[i]
        i = i + 1
    }
    assert(sum == 15, "accumulate sum should be 15")
    return 0
}

@test
func test_array_find_max() -> I32 {
    let arr: [I32; 5] = [3, 1, 4, 1, 5]
    var max: I32 = arr[0]
    var i: I64 = 1
    loop (i < arr.len()) {
        if arr[i] > max {
            max = arr[i]
        }
        i = i + 1
    }
    assert(max == 5, "max should be 5")
    return 0
}
