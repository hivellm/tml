//! Tests for F32x4 basic operations.

use core::simd::f32x4::F32x4

@test func test_new_and_get() -> I32 {
    let v = F32x4::new(1.0 as F32, 2.0 as F32, 3.0 as F32, 4.0 as F32)
    if v.get(0) != (1.0 as F32) { return 1 }
    if v.get(1) != (2.0 as F32) { return 1 }
    if v.get(2) != (3.0 as F32) { return 1 }
    if v.get(3) != (4.0 as F32) { return 1 }
    return 0
}

@test func test_splat() -> I32 {
    let v = F32x4::splat(5.0 as F32)
    if v.get(0) != (5.0 as F32) { return 1 }
    if v.get(1) != (5.0 as F32) { return 1 }
    if v.get(2) != (5.0 as F32) { return 1 }
    if v.get(3) != (5.0 as F32) { return 1 }
    return 0
}

@test func test_zero() -> I32 {
    let v = F32x4::zero()
    if v.get(0) != (0.0 as F32) { return 1 }
    if v.get(1) != (0.0 as F32) { return 1 }
    if v.get(2) != (0.0 as F32) { return 1 }
    if v.get(3) != (0.0 as F32) { return 1 }
    return 0
}

@test func test_set() -> I32 {
    let v = F32x4::zero()
    let v2 = v.set(2, 7.0 as F32)
    if v2.get(0) != (0.0 as F32) { return 1 }
    if v2.get(2) != (7.0 as F32) { return 1 }
    return 0
}

@test func test_add_sub() -> I32 {
    let a = F32x4::new(1.0 as F32, 2.0 as F32, 3.0 as F32, 4.0 as F32)
    let b = F32x4::new(10.0 as F32, 20.0 as F32, 30.0 as F32, 40.0 as F32)
    let c = a.add(b)
    if c.get(0) != (11.0 as F32) { return 1 }
    if c.get(3) != (44.0 as F32) { return 1 }
    let d = b.sub(a)
    if d.get(0) != (9.0 as F32) { return 1 }
    if d.get(3) != (36.0 as F32) { return 1 }
    return 0
}

@test func test_mul_div() -> I32 {
    let a = F32x4::new(2.0 as F32, 3.0 as F32, 4.0 as F32, 5.0 as F32)
    let b = F32x4::new(10.0 as F32, 10.0 as F32, 10.0 as F32, 10.0 as F32)
    let c = a.mul(b)
    if c.get(0) != (20.0 as F32) { return 1 }
    if c.get(3) != (50.0 as F32) { return 1 }
    let d = b.div(a)
    if d.get(0) != (5.0 as F32) { return 1 }
    if d.get(1) != (3.3333333 as F32) { return 2 }
    return 0
}

@test func test_neg() -> I32 {
    let a = F32x4::new(1.0 as F32, (0.0 as F32) - (2.0 as F32), 3.0 as F32, 0.0 as F32)
    let b = a.neg()
    if b.get(0) != ((0.0 as F32) - (1.0 as F32)) { return 1 }
    if b.get(1) != (2.0 as F32) { return 1 }
    if b.get(2) != ((0.0 as F32) - (3.0 as F32)) { return 1 }
    if b.get(3) != (0.0 as F32) { return 1 }
    return 0
}
