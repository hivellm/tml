// Tests for core::cell::ref_cell::RefCell[T] basic operations
use test
use core::cell::ref_cell::RefCell

@test
func test_ref_cell_replace() -> I32 {
    var c: RefCell[I32] = RefCell::new[I32](10)
    let old: I32 = c.replace(20)
    assert_eq(old, 10, "replace should return old value")
    return 0
}

@test
func test_ref_cell_get_mut() -> I32 {
    var c: RefCell[I32] = RefCell::new[I32](5)
    let r: mut ref I32 = c.get_mut()
    *r = 99
    let r2: mut ref I32 = c.get_mut()
    assert_eq(*r2, 99, "get_mut should reflect mutation")
    return 0
}

@test
func test_ref_cell_replace_str() -> I32 {
    var c: RefCell[Str] = RefCell::new[Str]("hello")
    let old: Str = c.replace("world")
    assert_eq(old, "hello", "replace should return old string")
    return 0
}
