// Tests for core::cell::once â€” OnceCell take, get, into_inner empty
use test::{assert, assert_eq}
use core::cell::once::{OnceCell}

@test
func test_oncecell_take_populated() -> I32 {
    var cell: OnceCell[I32] = OnceCell::with_value(42)
    assert(cell.is_initialized(), "cell should be initialized")
    let taken: Maybe[I32] = cell.take()
    assert(taken.is_just(), "take from populated cell should be Just")
    assert_eq(taken.unwrap(), 42, "taken value should be 42")
    assert(cell.is_empty(), "cell should be empty after take")
    return 0
}

@test
func test_oncecell_take_empty() -> I32 {
    var cell: OnceCell[I32] = OnceCell::new()
    let taken: Maybe[I32] = cell.take()
    assert(taken.is_nothing(), "take from empty cell should be Nothing")
    assert(cell.is_empty(), "cell should still be empty")
    return 0
}

@test
func test_oncecell_into_inner_empty() -> I32 {
    let cell: OnceCell[I32] = OnceCell::new()
    let val: Maybe[I32] = cell.into_inner()
    assert(val.is_nothing(), "into_inner on empty cell should be Nothing")
    return 0
}
