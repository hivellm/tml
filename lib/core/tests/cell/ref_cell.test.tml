// Tests for core::cell::ref_cell â€” RefCell, replace, get_mut
use test::{assert, assert_eq}
use core::cell::ref_cell::RefCell

@test
func test_ref_cell_new() -> I32 {
    let cell: RefCell[I64] = RefCell::new(42 as I64)
    let r: mut ref I64 = cell.get_mut()
    assert_eq(*r, 42 as I64, "RefCell::new should store value")
    return 0
}

@test
func test_ref_cell_get_mut() -> I32 {
    var cell: RefCell[I64] = RefCell::new(10 as I64)
    let r: mut ref I64 = cell.get_mut()
    *r = 20 as I64
    assert_eq(*cell.get_mut(), 20 as I64, "get_mut should allow mutation")
    return 0
}

@test
func test_ref_cell_replace() -> I32 {
    var cell: RefCell[I64] = RefCell::new(100 as I64)
    let old: I64 = cell.replace(200 as I64)
    assert_eq(old, 100 as I64, "replace should return old value")
    assert_eq(*cell.get_mut(), 200 as I64, "replace should set new value")
    return 0
}
