// Tests for core::convert module
// Note: The convert module defines From, Into, TryFrom, TryInto behaviors.
// See packages/core/src/convert.tml for the definitions.
use test

// ============================================================================
// Type Conversion Tests (Basic TML casts)
// ============================================================================

@test
func test_i8_to_i32() {
    let small: I8 = 42
    let big: I32 = small as I32
    assert_eq(big, 42)
}

@test
func test_i32_to_i64() {
    let small: I32 = 1000
    let big: I64 = small as I64
    assert_eq(big, 1000)
}

@test
func test_i64_to_i32_truncate() {
    let big: I64 = 255
    let small: I32 = big as I32
    assert_eq(small, 255)
}

@test
func test_f32_to_f64() {
    let small: F32 = 3.14
    let big: F64 = small as F64
    // Approximate comparison due to float precision
    assert(big > 3.13)
    assert(big < 3.15)
}

@test
func test_bool_to_i32() {
    let t: Bool = true
    let f: Bool = false
    // TML converts bool to 1/0
    let ti: I32 = t as I32
    let fi: I32 = f as I32
    assert_eq(ti, 1)
    assert_eq(fi, 0)
}

// ============================================================================
// TODO: Tests below require From/Into behavior implementations
// ============================================================================

// The core::convert module defines:
// - From[T] behavior: from(value: T) -> Self
// - Into[T] behavior: into(this) -> T
// - TryFrom[T] behavior: try_from(value: T) -> Outcome[Self, This::Error]
// - TryInto[T] behavior: try_into(this) -> Outcome[T, This::Error]
// - AsRef[T] and AsMut[T] for reference conversions

// These require the compiler to:
// 1. Load behavior definitions from core library
// 2. Support static method calls like: I32::from(value)
// 3. Support associated types: type Error
// 4. Support lowlevel blocks for numeric conversions: i8_to_i32(value)
