func bench_count_primes(limit: I32) -> I32 {
    let mut count: I32 = 0
    let mut n: I32 = 2
    loop {
        if n > limit {
            break
        }
        let mut is_prime: I32 = 1
        let mut i: I32 = 2
        loop {
            if i * i > n {
                break
            }
            if n % i == 0 {
                is_prime = 0
                break
            }
            i = i + 1
        }
        if is_prime == 1 {
            count = count + 1
        }
        n = n + 1
    }
    return count
}

func main() -> I32 {
    println("Testing count_primes")
    let start: I32 = time_ms()
    let r: I32 = bench_count_primes(10000)
    let t: I32 = time_ms() - start
    println("Time: {} ms, primes found = {}", t, r)
    return 0
}
