// Test 21: Enums
// Tests simple enum declarations and usage

// Simple enum (no data)
type Color {
    Red,
    Green,
    Blue
}

// Another simple enum
type Direction {
    North,
    South,
    East,
    West
}

// Enum for status
type Status {
    Pending,
    Active,
    Completed,
    Failed
}

func test_color() -> I32 {
    println("--- Color Enum Tests ---")

    // Test enum construction and comparison
    let red: Color = Color::Red
    let green: Color = Color::Green
    let blue: Color = Color::Blue

    // Test Red
    let is_red: Bool = when red {
        Color::Red => true,
        _ => false
    }
    if not is_red {
        println("FAIL: Color::Red pattern match failed")
        return 1
    }
    println("Color::Red - OK")

    // Test Green
    let is_green: Bool = when green {
        Color::Green => true,
        _ => false
    }
    if not is_green {
        println("FAIL: Color::Green pattern match failed")
        return 2
    }
    println("Color::Green - OK")

    // Test Blue
    let is_blue: Bool = when blue {
        Color::Blue => true,
        _ => false
    }
    if not is_blue {
        println("FAIL: Color::Blue pattern match failed")
        return 3
    }
    println("Color::Blue - OK")

    // Test comparison with enum variant
    if red == Color::Red {
        println("red == Color::Red - OK")
    } else {
        println("FAIL: red should equal Color::Red")
        return 4
    }

    if green != Color::Red {
        println("green != Color::Red - OK")
    } else {
        println("FAIL: green should not equal Color::Red")
        return 5
    }

    return 0
}

func test_direction() -> I32 {
    println("--- Direction Enum Tests ---")

    let north: Direction = Direction::North
    let south: Direction = Direction::South
    let east: Direction = Direction::East
    let west: Direction = Direction::West

    // Test pattern matching for each direction
    let match_north: Bool = when north {
        Direction::North => true,
        _ => false
    }
    if not match_north {
        println("FAIL: Direction::North pattern match failed")
        return 10
    }

    let match_south: Bool = when south {
        Direction::South => true,
        _ => false
    }
    if not match_south {
        println("FAIL: Direction::South pattern match failed")
        return 11
    }

    let match_east: Bool = when east {
        Direction::East => true,
        _ => false
    }
    if not match_east {
        println("FAIL: Direction::East pattern match failed")
        return 12
    }

    let match_west: Bool = when west {
        Direction::West => true,
        _ => false
    }
    if not match_west {
        println("FAIL: Direction::West pattern match failed")
        return 13
    }
    println("Direction values: OK")

    // Test comparison
    let dir: Direction = Direction::East
    if dir == Direction::East {
        println("dir == Direction::East - OK")
    } else {
        println("FAIL: dir should be East")
        return 14
    }

    return 0
}

func test_status() -> I32 {
    println("--- Status Enum Tests ---")

    let pending: Status = Status::Pending
    let active: Status = Status::Active
    let completed: Status = Status::Completed
    let failed: Status = Status::Failed

    // Test pattern matching for each status
    let match_pending: Bool = when pending {
        Status::Pending => true,
        _ => false
    }
    if not match_pending {
        println("FAIL: Status::Pending pattern match failed")
        return 20
    }

    let match_active: Bool = when active {
        Status::Active => true,
        _ => false
    }
    if not match_active {
        println("FAIL: Status::Active pattern match failed")
        return 21
    }

    let match_completed: Bool = when completed {
        Status::Completed => true,
        _ => false
    }
    if not match_completed {
        println("FAIL: Status::Completed pattern match failed")
        return 22
    }

    let match_failed: Bool = when failed {
        Status::Failed => true,
        _ => false
    }
    if not match_failed {
        println("FAIL: Status::Failed pattern match failed")
        return 23
    }
    println("Status values: OK")

    // Test assignment and comparison
    let mut status: Status = Status::Pending
    if status == Status::Pending {
        println("Initial status is Pending - OK")
    } else {
        println("FAIL: status should be Pending")
        return 24
    }

    // Change status
    status = Status::Active
    if status == Status::Active {
        println("Changed to Active - OK")
    } else {
        println("FAIL: status should be Active")
        return 25
    }

    // Mark completed
    status = Status::Completed
    if status == Status::Completed {
        println("Changed to Completed - OK")
    } else {
        println("FAIL: status should be Completed")
        return 26
    }

    return 0
}

func main() -> I32 {
    println("=== Enum Tests ===")

    let result1: I32 = test_color()
    if result1 != 0 {
        return result1
    }

    let result2: I32 = test_direction()
    if result2 != 0 {
        return result2
    }

    let result3: I32 = test_status()
    if result3 != 0 {
        return result3
    }

    println("=== All enum tests passed! ===")
    return 0
}
