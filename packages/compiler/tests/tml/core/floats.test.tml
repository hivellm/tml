// Test F64 (float64) operations
use test

@test
func test_float_comparisons() -> I32 {
    // Test float literals
    let a: F64 = 3.14
    let b: F64 = 2.71

    // Test less than
    if a < b then {
        return 1  // Should not happen
    }

    // Test greater than
    if not (a > b) then {
        return 2  // Should not happen
    }

    // Test equality
    let c: F64 = 3.14
    if not (a == c) then {
        return 3  // Should not happen
    }

    // Test inequality
    if not (a != b) then {
        return 4  // Should not happen
    }

    // Test less than or equal
    if not (b <= a) then {
        return 5  // Should not happen
    }

    // Test greater than or equal
    if not (a >= c) then {
        return 6  // Should not happen
    }

    return 0  // Success
}

@test
func test_float_arithmetic() -> I32 {
    let x: F64 = 10.0
    let y: F64 = 3.0

    // Test addition
    let sum: F64 = x + y
    if sum < 12.9 or sum > 13.1 then {
        return 1
    }

    // Test subtraction
    let diff: F64 = x - y
    if diff < 6.9 or diff > 7.1 then {
        return 2
    }

    // Test multiplication
    let prod: F64 = x * y
    if prod < 29.9 or prod > 30.1 then {
        return 3
    }

    // Test division
    let quot: F64 = x / y
    if quot < 3.3 or quot > 3.4 then {
        return 4
    }

    return 0  // Success
}

@test
func test_float_sqrt() -> I32 {
    // Test sqrt function
    let val: F64 = 16.0
    let result: F64 = sqrt(val)

    // sqrt(16.0) should be 4.0
    if result < 3.9 or result > 4.1 then {
        return 1
    }

    // Test sqrt(2) - should be approximately 1.414
    let sqrt2: F64 = sqrt(2.0)
    if sqrt2 < 1.4 or sqrt2 > 1.5 then {
        return 2
    }

    return 0  // Success
}

@test
func test_float_pow() -> I32 {
    // Test pow function
    let base: F64 = 2.0
    let result: F64 = pow(base, 3)  // 2^3 = 8

    if result < 7.9 or result > 8.1 then {
        return 1
    }

    // Test pow(10, 2) = 100
    let result2: F64 = pow(10.0, 2)
    if result2 < 99.9 or result2 > 100.1 then {
        return 2
    }

    return 0  // Success
}

@test
func test_int_to_float() -> I32 {
    // Test int_to_float conversion
    let i: I32 = 42
    let f: F64 = int_to_float(i)

    if f < 41.9 or f > 42.1 then {
        return 1
    }

    return 0  // Success
}

@test
func test_float_to_int() -> I32 {
    // Test float_to_int conversion (truncates)
    let f: F64 = 42.7
    let i: I32 = float_to_int(f)

    if i != 42 then {
        return 1
    }

    // Test negative
    let neg: F64 = -3.9
    let neg_i: I32 = float_to_int(neg)
    if neg_i != -3 then {
        return 2
    }

    return 0  // Success
}
