use test

@test
func closure_no_capture() -> I32 {
    let f: func(I32) -> I32 = do(n: I32) -> I32 { n }
    let result: I32 = f(5)
    assert_eq(result, 5, "closure should return 5")
    return 0
}

@test
func closure_identity() -> I32 {
    let identity: func(I32) -> I32 = do(x: I32) -> I32 { x }
    let val: I32 = identity(42)
    assert_eq(val, 42, "identity closure should return 42")
    return 0
}

@test
func closure_arithmetic() -> I32 {
    let double: func(I32) -> I32 = do(x: I32) -> I32 { x + x }
    let result: I32 = double(10)
    assert_eq(result, 20, "double closure should return 20")
    return 0
}

func apply_func(f: func(I32) -> I32, val: I32) -> I32 {
    return f(val)
}

@test
func function_as_parameter() -> I32 {
    let increment: func(I32) -> I32 = do(x: I32) -> I32 { x + 1 }
    let result: I32 = apply_func(increment, 9)
    assert_eq(result, 10, "function parameter should return 10")
    return 0
}
