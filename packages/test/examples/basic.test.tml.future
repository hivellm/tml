// Basic test examples showing TML test framework usage

use test

// ============================================================================
// Simple Tests
// ============================================================================

@test
func test_simple_assertion() {
    assert!(true)
    assert!(1 + 1 == 2)
}

@test
func test_equality() {
    let x: I32 = 42
    assert_eq!(x, 42)
}

@test
func test_inequality() {
    let x: I32 = 5
    let y: I32 = 10
    assert_ne!(x, y)
}

// ============================================================================
// Named Tests
// ============================================================================

@test
func test_addition() {
    assert_eq!(2 + 2, 4)
    assert_eq!(10 + 5, 15)
}

@test
func test_subtraction() {
    assert_eq!(10 - 5, 5)
    assert_eq!(100 - 1, 99)
}

// ============================================================================
// Panic Tests
// ============================================================================

@test
@should_panic
func test_division_by_zero() {
    let x: I32 = 1 / 0
}

@test
@should_panic
func test_failed_assertion() {
    assert!(false)
}

// ============================================================================
// Ignored Tests
// ============================================================================

@test
@ignore
func slow_expensive_test() {
    // This test is ignored by default
    // Run with: tml test --ignored
    let sum: I32 = 0
    for i in 0 to 1000000 {
        sum = sum + i
    }
    assert!(sum > 0)
}

// ============================================================================
// String Tests
// ============================================================================

@test
func test_string_operations() {
    let s1: Str = "hello"
    let s2: Str = "world"
    let combined: Str = s1 + " " + s2
    assert_eq!(combined, "hello world")
}

@test
func test_string_length() {
    let s: Str = "TML"
    assert_eq!(s.len(), 3)
}

// ============================================================================
// Array Tests
// ============================================================================

@test
func test_array_creation() {
    let arr: [I32] = [1, 2, 3, 4, 5]
    assert_eq!(arr.len(), 5)
}

@test
func test_array_access() {
    let arr: [I32] = [10, 20, 30]
    assert_eq!(arr[0], 10)
    assert_eq!(arr[1], 20)
    assert_eq!(arr[2], 30)
}

// ============================================================================
// Struct Tests
// ============================================================================

type Point {
    x: I32,
    y: I32,
}

@test
func test_struct_creation() {
    let p: Point = Point { x: 5, y: 10 }
    assert_eq!(p.x, 5)
    assert_eq!(p.y, 10)
}

@test
func test_struct_equality() {
    let p1: Point = Point { x: 1, y: 2 }
    let p2: Point = Point { x: 1, y: 2 }
    assert_eq!(p1, p2)
}

// ============================================================================
// Function Tests
// ============================================================================

func add(a: I32, b: I32) -> I32 {
    a + b
}

func multiply(a: I32, b: I32) -> I32 {
    a * b
}

@test
func test_add_function() {
    assert_eq!(add(2, 3), 5)
    assert_eq!(add(0, 0), 0)
    assert_eq!(add(-1, 1), 0)
}

@test
func test_multiply_function() {
    assert_eq!(multiply(2, 3), 6)
    assert_eq!(multiply(5, 0), 0)
    assert_eq!(multiply(-2, 3), -6)
}

// ============================================================================
// Benchmark Examples
// ============================================================================

@bench
func bench_simple_addition() {
    let x: I32 = 1 + 1
}

@bench
func bench_array_iteration() {
    let arr: [I32] = [1, 2, 3, 4, 5]
    let sum: I32 = 0
    for x in arr {
        sum = sum + x
    }
}

@bench
func bench_string_concatenation() {
    let s: Str = ""
    for i in 0 to 100 {
        s = s + "x"
    }
}
