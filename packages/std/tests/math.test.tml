use test
use std::math::{abs, sqrt, pow, min, max, floor, ceil, round}

// Math Function Tests

@test
func test_abs_positive() -> I32 {
    let result: I32 = abs(42)
    assert_eq_i32(result, 42, "abs of positive number should be itself")
    return 0
}

@test
func test_abs_negative() -> I32 {
    let result: I32 = abs(-42)
    assert_eq_i32(result, 42, "abs of negative number should be positive")
    return 0
}

@test
func test_abs_zero() -> I32 {
    let result: I32 = abs(0)
    assert_eq_i32(result, 0, "abs of zero should be zero")
    return 0
}

@test
func test_sqrt_perfect_square() -> I32 {
    // sqrt now returns F64, convert to I32 for comparison
    let result: I32 = float_to_int(sqrt(16.0))
    assert_eq_i32(result, 4, "sqrt(16) should be 4")
    return 0
}

@test
func test_sqrt_zero() -> I32 {
    let result: I32 = float_to_int(sqrt(0.0))
    assert_eq_i32(result, 0, "sqrt(0) should be 0")
    return 0
}

@test
func test_sqrt_large() -> I32 {
    let result: I32 = float_to_int(sqrt(100.0))
    assert_eq_i32(result, 10, "sqrt(100) should be 10")
    return 0
}

@test
func test_pow_basic() -> I32 {
    // pow now returns F64, convert to I32 for comparison
    let result: I32 = float_to_int(pow(2.0, 3))
    assert_eq_i32(result, 8, "2^3 should be 8")
    return 0
}

@test
func test_pow_zero_exponent() -> I32 {
    let result: I32 = float_to_int(pow(5.0, 0))
    assert_eq_i32(result, 1, "5^0 should be 1")
    return 0
}

@test
func test_pow_one_exponent() -> I32 {
    let result: I32 = float_to_int(pow(42.0, 1))
    assert_eq_i32(result, 42, "42^1 should be 42")
    return 0
}

@test
func test_pow_squares() -> I32 {
    let result: I32 = float_to_int(pow(10.0, 2))
    assert_eq_i32(result, 100, "10^2 should be 100")
    return 0
}

@test
func test_round() -> I32 {
    let result: I32 = round(47)
    assert_eq_i32(result, 47, "round(47) should be 47")
    return 0
}

@test
func test_floor() -> I32 {
    let result: I32 = floor(49)
    assert_eq_i32(result, 49, "floor(49) should be 49")
    return 0
}

@test
func test_ceil() -> I32 {
    let result: I32 = ceil(41)
    assert_eq_i32(result, 41, "ceil(41) should be 41")
    return 0
}

@test
func test_min() -> I32 {
    let result: I32 = min(5, 10)
    assert_eq_i32(result, 5, "min(5, 10) should be 5")
    return 0
}

@test
func test_max() -> I32 {
    let result: I32 = max(5, 10)
    assert_eq_i32(result, 10, "max(5, 10) should be 10")
    return 0
}
