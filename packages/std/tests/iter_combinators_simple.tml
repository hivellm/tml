// Test iterator combinators without test module
use std::iter

func main() -> I32 {
    // Test 1: sum
    let mut r1: Range = range(1, 5)
    let sum_result: I32 = r1.sum()
    if sum_result != 10 {
        print("FAIL: range(1,5).sum() should be 10")
        return 1
    }

    // Test 2: count
    let mut r2: Range = range(0, 10)
    let count_result: I32 = r2.count()
    if count_result != 10 {
        print("FAIL: range(0,10).count() should be 10")
        return 2
    }

    // Test 3: fold with multiplication
    let mut r3: Range = range(1, 5)
    let fold_result: I32 = r3.fold(1, do(acc: I32, x: I32) -> I32 acc * x)
    if fold_result != 24 {
        print("FAIL: range(1,5).fold(1, mul) should be 24")
        return 3
    }

    // Test 4: any - should find 5
    let mut r4: Range = range(1, 10)
    let found: Bool = r4.any(do(x: I32) -> Bool x == 5)
    if not found {
        print("FAIL: range(1,10) should have 5")
        return 4
    }

    // Test 5: any - should not find 10
    let mut r5: Range = range(1, 5)
    let not_found: Bool = r5.any(do(x: I32) -> Bool x == 10)
    if not_found {
        print("FAIL: range(1,5) should not have 10")
        return 5
    }

    // Test 6: all - all positive
    let mut r6: Range = range(1, 5)
    let all_positive: Bool = r6.all(do(x: I32) -> Bool x > 0)
    if not all_positive {
        print("FAIL: all elements in range(1,5) should be > 0")
        return 6
    }

    // Test 7: all - not all small
    let mut r7: Range = range(1, 10)
    let all_small: Bool = r7.all(do(x: I32) -> Bool x < 5)
    if all_small {
        print("FAIL: not all elements in range(1,10) are < 5")
        return 7
    }

    // Test 8: take + sum
    let r8: Range = range(0, 100)
    let mut taken: Range = r8.take(3)
    let take_sum: I32 = taken.sum()
    if take_sum != 3 {
        print("FAIL: range(0,100).take(3).sum() should be 3")
        return 8
    }

    // Test 9: skip + sum
    let r9: Range = range(0, 10)
    let mut skipped: Range = r9.skip(7)
    let skip_sum: I32 = skipped.sum()
    if skip_sum != 24 {
        print("FAIL: range(0,10).skip(7).sum() should be 24")
        return 9
    }

    // Test 10: range_inclusive + sum
    let mut r10: Range = range_inclusive(1, 5)
    let incl_sum: I32 = r10.sum()
    if incl_sum != 15 {
        print("FAIL: range_inclusive(1,5).sum() should be 15")
        return 10
    }

    print("PASS: All iterator combinator tests passed!")
    return 0
}
