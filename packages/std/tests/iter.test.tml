// Tests for std::iter module
use test
use std::iter

// ============================================================================
// Tests for Range and iteration
// ============================================================================

@test
func test_range_creation() -> I32 {
    let r: Range = range(0, 10)
    assert(r.current == 0, "Range should start at 0")
    assert(r.end == 10, "Range should end at 10")
    return 0
}

@test
func test_range_inclusive_creation() -> I32 {
    let r: Range = range_inclusive(1, 5)
    assert(r.current == 1, "Range should start at 1")
    assert(r.end == 5, "Range should end at 5")
    assert(r.inclusive == true, "Range should be inclusive")
    return 0
}

@test
func test_for_in_range() -> I32 {
    // Test for-in loop with range syntax
    let mut sum: I32 = 0
    for i in 0 to 5 {
        sum = sum + i
    }
    // 0 + 1 + 2 + 3 + 4 = 10
    assert(sum == 10, "Sum of 0 to 5 should be 10")
    return 0
}

@test
func test_for_in_range_inclusive() -> I32 {
    let mut sum: I32 = 0
    for i in 1 through 5 {
        sum = sum + i
    }
    // 1 + 2 + 3 + 4 + 5 = 15
    assert(sum == 15, "Sum of 1 through 5 should be 15")
    return 0
}

@test
func test_range_step() -> I32 {
    let r: Range = range_step(0, 10, 2)
    assert(r.current == 0, "Range should start at 0")
    assert(r.end == 10, "Range should end at 10")
    assert(r.step == 2, "Range step should be 2")
    return 0
}

@test
func test_nested_for_loops() -> I32 {
    let mut total: I32 = 0
    for i in 0 to 3 {
        for j in 0 to 3 {
            total = total + 1
        }
    }
    // 3 x 3 = 9 iterations
    assert(total == 9, "Should have 9 iterations")
    return 0
}
