// HashMap implementation

/// Hash map type for key-value storage
pub type HashMap[K, V] {
    size: I32,
}

impl[K, V] HashMap[K, V] {
    /// Create a new empty hash map
    pub func new() -> HashMap[K, V] {
        HashMap { size: 0 }
    }

    /// Create with initial capacity
    pub func with_capacity(capacity: I32) -> HashMap[K, V] {
        HashMap { size: 0 }
    }

    /// Insert a key-value pair
    pub func insert(mut this, key: K, value: V) -> Maybe[V] {
        // TODO: Implement hash map insertion
        this.size = this.size + 1
        Nothing
    }

    /// Get a value by key
    pub func get(this, key: ref K) -> Maybe[ref V] {
        // TODO: Implement hash map lookup
        Nothing
    }

    /// Remove a key-value pair
    pub func remove(mut this, key: ref K) -> Maybe[V] {
        // TODO: Implement hash map removal
        Nothing
    }

    /// Check if map contains a key
    pub func contains_key(this, key: ref K) -> Bool {
        // TODO: Implement key check
        false
    }

    /// Get the number of elements
    pub func len(this) -> I32 {
        this.size
    }

    /// Check if map is empty
    pub func is_empty(this) -> Bool {
        this.size == 0
    }

    /// Clear the map
    pub func clear(mut this) {
        this.size = 0
    }
}

@test
func test_hashmap_new() {
    let map: HashMap[Str, I32] = HashMap::new()
    assert!(map.is_empty())
    assert_eq!(map.len(), 0)
}

@test
func test_hashmap_insert() {
    let mut map: HashMap[Str, I32] = HashMap::new()
    let old: Maybe[I32] = map.insert("key", 42)
    assert!(old.is_nothing())
    assert_eq!(map.len(), 1)
}
