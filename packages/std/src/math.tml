// std::math - Mathematical functions (pure TML implementation)
// NO lowlevel - all implementations in pure TML

// ============ BASIC ARITHMETIC ============

// Absolute value
pub func abs(value: I32) -> I32 {
    if value < 0 then -value else value
}

// Integer square root using Newton's method
pub func sqrt(value: I32) -> I32 {
    if value <= 1 then return value

    let mut x: I32 = value
    let mut y: I32 = (x + 1) / 2

    loop {
        if y >= x then break
        x = y
        y = (x + value / x) / 2
    }

    return x
}

// Integer power (base^exp)
pub func pow(base: I32, exp: I32) -> I32 {
    if exp == 0 then return 1
    if exp < 0 then return 0  // Integer division would give 0

    let mut result: I32 = 1
    let mut i: I32 = 0

    loop {
        if i >= exp then break
        result = result * base
        i = i + 1
    }

    return result
}

// ============ MIN/MAX ============

// Minimum of two values
pub func min(a: I32, b: I32) -> I32 {
    if a < b then a else b
}

// Maximum of two values
pub func max(a: I32, b: I32) -> I32 {
    if a > b then a else b
}

// ============ ROUNDING (No-ops for integers) ============

// Floor (identity for integers)
pub func floor(value: I32) -> I32 {
    value
}

// Ceiling (identity for integers)
pub func ceil(value: I32) -> I32 {
    value
}

// Round (identity for integers)
pub func round(value: I32) -> I32 {
    value
}
