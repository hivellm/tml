# TML vs C++ Profile Benchmark Report

**Date:** 2026-02-24 20:10:42
**Platform:** Windows 10 (AMD64)
**C++ Compiler:** MSVC /O2 (Visual Studio 2022)
**TML Compiler:** tml.exe --release (LLVM -O3)
**Total runtime:** 60.5s

---

## Math

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| Integer Addition | 0 | 0 | ~tied |
| Integer Multiplication | 2 | 0 | **TML 2.0x faster** |
| Integer Division | 1 | 0 | ~tied |
| Integer Modulo | 0 | 0 | ~tied |
| Bitwise Operations | 0 | 0 | ~tied |
| Float Addition | 0 | 0 | ~tied |
| Float Multiplication | 0 | 0 | ~tied |
| Square Root | 1 | - | C++ only |
| Fibonacci Recursive (n=20) | 18 | 0 | **TML 18.0x faster** |
| Fibonacci Iterative (n=50) | 10 | 0 | **TML 10.0x faster** |
| Empty Loop | 0 | 0 | ~tied |

## String

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| Concat Small (3 strings) | 8 | 0 | **TML 8.0x faster** |
| Concat Loop (with reserve) | 3 | - | C++ only |
| Concat Loop (naive) | 4 | - | C++ only |
| String Length | 0 | 0 | ~tied |
| String Compare (equal) | 0 | 0 | ~tied |
| String Compare (different) | 0 | 0 | ~tied |
| Int to String | 9 | 45 | C++ 5x |
| String Copy | 3 | - | C++ only |
| String Repeat (50 chars) | 34 | - | C++ only |
| Sprintf Formatting | 69 | - | C++ only |
| Log Building | 19 | - | C++ only |
| Concat Loop (Text - O(n)) | - | 2 | TML only |
| Concat Loop (Str - O(n^2)) | - | 3290 | TML only |
| Log Building (Text - O(n)) | - | 56 | TML only |
| Log Building (Str - O(n^2)) | - | 4355 | TML only |

## Collections

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| Vec Push (grow) | 3 | - | C++ only |
| Vec Push (reserved) | 1 | - | C++ only |
| Vec Random Access | 0 | - | C++ only |
| Vec Iteration | 0 | - | C++ only |
| Vec Pop | 1 | - | C++ only |
| Vec Set | 0 | - | C++ only |
| HashMap Insert | 73 | - | C++ only |
| HashMap Insert (reserved) | 77 | - | C++ only |
| HashMap Lookup | 5 | - | C++ only |
| HashMap Contains | 4 | - | C++ only |
| HashMap Remove | 85 | - | C++ only |
| HashMap String Key | 144 | - | C++ only |
| Array Sequential Read | - | 0 | TML only |
| Array Random Access | - | 0 | TML only |
| Array Write | - | 0 | TML only |
| Array Initialization | - | 0 | TML only |
| Linear Search | - | 0 | TML only |
| Accumulate Sum | - | 0 | TML only |

## Hashmap

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| HashMap Insert | 264 | 27 | **TML 9.8x faster** |
| HashMap Insert (reserved) | 207 | 24 | **TML 8.6x faster** |
| HashMap Lookup | 5 | 1 | **TML 5.0x faster** |
| HashMap Contains | 4 | 1 | **TML 4.0x faster** |
| HashMap Remove | 298 | 13 | **TML 22.9x faster** |
| HashMap String Key | 520 | - | C++ only |

## List

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| List Push (grow) | 4 | 3 | **TML 1.3x faster** |
| List Push (reserved) | 1 | 1 | ~tied |
| List Random Access | 0 | 0 | ~tied |
| List Iteration | 0 | 0 | ~tied |
| List Pop | 2 | 0 | **TML 2.0x faster** |
| List Set | 0 | 0 | ~tied |

## Control Flow

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| If-Else Chain (4 branches) | 0 | 0 | ~tied |
| Nested If (4 levels) | 0 | 0 | ~tied |
| Switch Dense (10 cases) | 1 | - | C++ only |
| Switch Sparse (10 cases) | 1 | - | C++ only |
| For Loop | 0 | - | C++ only |
| While + Break | 0 | - | C++ only |
| Nested Loops (1000x1000) | 0 | 0 | ~tied |
| Loop + Continue | 0 | 0 | ~tied |
| Ternary Chain | 0 | 0 | ~tied |
| Short-Circuit AND | 0 | 0 | ~tied |
| Short-Circuit OR | 0 | 0 | ~tied |
| When Dense (10 cases) | - | 0 | TML only |
| When Sparse (10 cases) | - | 0 | TML only |
| Loop | - | 0 | TML only |

## Closure

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| Lambda No Capture | 0 | - | C++ only |
| Lambda Value Capture | 0 | - | C++ only |
| Lambda Ref Capture | 0 | - | C++ only |
| Lambda Multi Capture | 0 | - | C++ only |
| std::function Wrapper | 0 | - | C++ only |
| Higher Order Function | 0 | 0 | ~tied |
| Closure Factory | 0 | - | C++ only |
| Manual Loop (index) | 0 | - | C++ only |
| Iterator Loop | 0 | - | C++ only |
| Range-based For | 0 | - | C++ only |
| std::for_each | 0 | - | C++ only |
| std::accumulate | 0 | - | C++ only |
| std::transform | 0 | - | C++ only |
| Filter Pattern | 0 | - | C++ only |
| Chain Operations | 0 | 0 | ~tied |
| Function Pointer | - | 0 | TML only |
| Function Pointer Switch | - | 3 | TML only |
| Function Composition | - | 0 | TML only |
| Manual Loop (array) | - | 0 | TML only |
| Map Simulation | - | 0 | TML only |
| Filter Simulation | - | 0 | TML only |
| Fold/Reduce Simulation | - | 0 | TML only |

## Function

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| Inline Call | 0 | 0 | ~tied |
| Direct Call (noinline) | 0 | 0 | ~tied |
| Many Parameters (6 args) | 0 | 0 | ~tied |
| Fibonacci Recursive (n=20) | 21 | 10 | **TML 2.1x faster** |
| Fibonacci Tail (n=50) | 0 | 0 | ~tied |
| Mutual Recursion (n=100) | 0 | 0 | ~tied |
| Function Pointer | 1 | - | C++ only |
| std::function | 2 | - | C++ only |
| Virtual Call | 0 | - | C++ only |
| Devirtualized Call | 0 | - | C++ only |

## Memory

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| malloc/free (64 bytes) | 25 | - | C++ only |
| new/delete Small (16 bytes) | 24 | - | C++ only |
| new/delete Medium (64 bytes) | 24 | - | C++ only |
| new/delete Large (192 bytes) | 27 | - | C++ only |
| Stack Struct Creation | 0 | - | C++ only |
| unique_ptr RAII | 23 | - | C++ only |
| Struct Copy (64 bytes) | 0 | - | C++ only |
| memcpy (1KB) | 0 | - | C++ only |
| Array Alloc (1000 structs) | 27 | - | C++ only |
| Sequential Access | 0 | 0 | ~tied |
| Random Access | 0 | 0 | ~tied |
| Pointer Indirection | 0 | - | C++ only |
| Stack Struct Small (16 bytes) | - | 0 | TML only |
| Stack Struct Medium (64 bytes) | - | 0 | TML only |
| Struct Field Access | - | 0 | TML only |
| Nested Struct Access | - | 0 | TML only |
| Point Creation | - | 0 | TML only |
| Array Copy (1000 elements) | - | 0 | TML only |
| Array Fill (1000 elements) | - | 0 | TML only |

## Text

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| stringstream Append | 171 | - | C++ only |
| string Reserve+Append | 16 | - | C++ only |
| string Naive Append | 4 | - | C++ only |
| Build JSON | 339 | - | C++ only |
| Build HTML | 17 | - | C++ only |
| Build CSV | 39 | - | C++ only |
| Small Appends (1 char) | 0 | - | C++ only |
| Number Formatting | 506 | 87 | **TML 5.8x faster** |
| Log Messages | 46 | 37 | ~tied |
| Path Building | 23 | 9 | **TML 2.6x faster** |
| Text Append (O(1) amortized) | - | 44 | TML only |
| Str Naive Append (O(n^2)) | - | 3005 | TML only |
| Build JSON (10K items) | - | 92 | TML only |
| Build HTML (10K items) | - | 4 | TML only |
| Build CSV (10K rows) | - | 25 | TML only |
| Small Appends push() | - | 0 | TML only |
| Small Appends push_str() | - | 0 | TML only |
| Small Appends fill_char() batch | - | 0 | TML only |
| Small Appends raw ptr | - | 0 | TML only |

## Oop

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| Object Creation (stack) | 0 | 0 | ~tied |
| Method Call (non-virtual) | 0 | 0 | ~tied |
| Method Chaining | 0 | 0 | ~tied |
| Virtual Dispatch (3 types) | 2 | - | C++ only |
| Virtual Dispatch (single type) | 0 | - | C++ only |
| Deep Inheritance (4 levels) | 0 | - | C++ only |
| Multiple Inheritance | 0 | - | C++ only |
| Stack Allocation | 0 | 0 | ~tied |
| Heap Allocation (unique_ptr) | 23 | - | C++ only |
| Shared Pointer (shared_ptr) | 26 | - | C++ only |
| Circle Method Calls | - | 1 | TML only |
| Rectangle Method Calls | - | 1 | TML only |
| Deep Composition (4 levels) | - | 0 | TML only |

## Type

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| Int Widen (i32->i64) | 0 | 0 | ~tied |
| Int Narrow (i64->i32) | 0 | 0 | ~tied |
| Unsigned to Signed | 0 | 0 | ~tied |
| Signed to Unsigned | 0 | 0 | ~tied |
| Int to Float (i64->f64) | 0 | 0 | ~tied |
| Float to Int (f64->i64) | 0 | 0 | ~tied |
| Float Widen (f32->f64) | 0 | 0 | ~tied |
| Float Narrow (f64->f32) | 0 | 0 | ~tied |
| Byte Chain (i8->i64) | 0 | 0 | ~tied |
| Mixed Type Arithmetic | 2 | 2 | ~tied |
| Pointer to Int | 0 | - | C++ only |
| Int to Pointer | 0 | - | C++ only |
| Bit Reinterpret | 0 | - | C++ only |

## Encoding

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| Base64 Encode (13 bytes) | 37 | 44 | ~tied |
| Base64 Encode (95 bytes) | 100 | 78 | **TML 1.3x faster** |
| Base64 Decode (20 chars) | 64 | 40 | **TML 1.6x faster** |
| Hex Encode (13 bytes) | 36 | 42 | ~tied |
| Hex Decode (26 chars) | 60 | 54 | ~tied |
| Base32 Encode (13 bytes) | 40 | 46 | ~tied |

## Crypto

| Operation | C++ (ns/op) | TML (ns/op) | Verdict |
|---|---:|---:|---|
| SHA256 (13 bytes) | 367 | 408 | ~tied |
| SHA256 (95 bytes) | 341 | 435 | C++ 1.3x |
| SHA256 Streaming (3 updates) | 342 | 554 | C++ 1.6x |
| SHA512 (13 bytes) | 427 | 564 | C++ 1.3x |
| MD5 (13 bytes) | 331 | 466 | C++ 1.4x |
| SHA256 + to_hex (13 bytes) | 391 | 547 | C++ 1.4x |

## Json

> C++ benchmark failed: json_bench.exe not found

| Operation | TML (ns/op) | TML Ops/sec |
|---|---|---|
| Parse Tiny (27 bytes) | 288 | 3,463,407 |
| Parse Small (200 bytes) | 1069 | 935,418 |
| Parse Medium (500 bytes) | 3089 | 323,703 |
| Parse Standard (non-SIMD) | 2075 | 481,906 |
| Field Access | 1061 | 941,760 |
| Array Iteration | 1178 | 848,305 |
| Nested Object Access | 1359 | 735,794 |
| Parse + Validate | 1066 | 937,325 |
| Object Traversal | 1084 | 921,934 |

---

## Summary

| | Count | % |
|---|---:|---:|
| **TML faster** | 16 | 22% |
| **Tied** (< 1.2x) | 50 | 69% |
| **C++ faster** | 6 | 8% |
| **Total comparisons** | 72 | 100% |

## Errors

- **C++/json**: json_bench.exe not found
