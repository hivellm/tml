// Basic TML example showcasing core syntax

mod examples::basic

use std::io
use std::collections::{List, Map}

/// Calculates the sum of two integers
/// Returns the sum as I32
pub func add(a: I32, b: I32) -> I32 {
    return a + b
}

/// Fibonacci sequence calculator
func fibonacci(n: I32) -> I32 {
    if n <= 1 then
        return n
    else
        return fibonacci(n - 1) + fibonacci(n - 2)
}

// @ai:intent: Demonstrates control flow and loops
func count_to_ten() {
    // For loop with range
    for i in 0 to 10 {
        println(i)
    }

    // Conditional loop
    var count: I32 = 0
    loop (count < 10) {
        count = count + 1
    }

    // Loop with variable declaration
    loop (var i: I32 < 20) {
        println(i)
        i = i + 1
    }

    // While loop (alias for loop (condition))
    while count < 30 {
        count = count + 1
    }
}

/// Boolean logic demonstration
func logical_operations(a: Bool, b: Bool) -> Bool {
    let result1: Bool = a and b
    let result2: Bool = a or b
    let result3: Bool = not a

    return result1 and result2 or result3
}

/// Ternary operator example
func max(a: I32, b: I32) -> I32 {
    return a > b ? a : b
}

/// Pattern matching with when expression
func classify_number(n: I32) -> String {
    when n {
        0 => "zero",
        1 => "one",
        2 => "two",
        _ => "other",
    }
}

// Constants
const PI: F64 = 3.14159265359
const MAX_SIZE: I32 = 1024
const VERSION: String = "1.0.0"

@test
func test_addition() {
    assert_eq(add(2, 2), 4, "Addition works")
    assert_eq(add(0, 0), 0, "Zero addition works")
}

@test
func test_fibonacci() {
    assert_eq(fibonacci(0), 0)
    assert_eq(fibonacci(1), 1)
    assert_eq(fibonacci(5), 5)
    assert_eq(fibonacci(10), 55)
}
